        // Âà†Èô§È¢ÑÁ∫¶
        function deleteBooking(bookingId) {
            if (confirm('Are you sure you want to delete this booking? This action cannot be undone. | Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™È¢ÑÁ∫¶ÂêóÔºüÊ≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄ„ÄÇ')) {
                const bookingIndex = appData.bookings.findIndex(b => b.id === bookingId);
                if (bookingIndex !== -1) {
                    appData.bookings.splice(bookingIndex, 1);
                    loadOrdersList();
                    generateCalendar(); // Êõ¥Êñ∞Êó•ÂéÜÊòæÁ§∫
                    alert('Booking deleted successfully. | È¢ÑÁ∫¶Â∑≤ÊàêÂäüÂà†Èô§„ÄÇ');
                }
            }
        }

        // ‰øÆÊîπÈ¢ÑÁ∫¶Êó∂Èó¥
        function modifyBookingTime(bookingId) {
            const booking = appData.bookings.find(b => b.id === bookingId);
            if (!booking) return;

            const newDate = prompt(`Current date: ${booking.preferredDate}\nEnter new date (YYYY-MM-DD): | ÂΩìÂâçÊó•ÊúüÔºö${booking.preferredDate}\nËØ∑ËæìÂÖ•Êñ∞Êó•Êúü (YYYY-MM-DD)Ôºö`, booking.preferredDate);
            if (!newDate) return;

            const newTime = prompt(`Current time: ${booking.preferredTimeSlot}\nEnter new time slot: | ÂΩìÂâçÊó∂Èó¥Ôºö${booking.preferredTimeSlot}\nËØ∑ËæìÂÖ•Êñ∞Êó∂Èó¥ÊÆµÔºö`, booking.preferredTimeSlot);
            if (!newTime) return;

            // Ê£ÄÊü•Êñ∞Êó∂Èó¥ÊòØÂê¶ÂÜ≤Á™Å
            const isConflict = appData.bookings.some(b => 
                b.id !== bookingId && 
                b.preferredDate === newDate && 
                b.preferredTimeSlot === newTime && 
                b.status === 'confirmed'
            );

            if (isConflict) {
                alert('Time slot conflict! Please choose another time. | Êó∂Èó¥ÂÜ≤Á™ÅÔºÅËØ∑ÈÄâÊã©ÂÖ∂‰ªñÊó∂Èó¥„ÄÇ');
                return;
            }

            booking.preferredDate = newDate;
            booking.preferredTimeSlot = newTime;
            
            loadOrdersList();
            generateCalendar();
            
            // ÂèëÈÄÅÁ°ÆËÆ§ÈÇÆ‰ª∂
            sendConfirmationEmail(booking, true);
        }

        // ÂèëÈÄÅÁ°ÆËÆ§ÈÇÆ‰ª∂
        function sendConfirmationEmail(booking, isModification = false) {
            const emailType = isModification ? 'modification' : 'confirmation';
            const subject = isModification ? 
                `Booking Time Modified | È¢ÑÁ∫¶Êó∂Èó¥Â∑≤‰øÆÊîπ - ${booking.orderNumber}` : 
                `Booking Confirmed | È¢ÑÁ∫¶Â∑≤Á°ÆËÆ§ - ${booking.orderNumber}`;
            
            const emailContent = `
Dear ${booking.customerName} | ‰∫≤Áà±ÁöÑ ${booking.customerName}Ôºå

${isModification ? 
    'Your booking time has been modified. | ÊÇ®ÁöÑÈ¢ÑÁ∫¶Êó∂Èó¥Â∑≤Ë¢´‰øÆÊîπ„ÄÇ' : 
    'Your booking has been confirmed. | ÊÇ®ÁöÑÈ¢ÑÁ∫¶Â∑≤Á°ÆËÆ§„ÄÇ'}

Booking Details | È¢ÑÁ∫¶ËØ¶ÊÉÖÔºö
- Order Number | ËÆ¢ÂçïÂè∑: ${booking.orderNumber}
- Service Type | ÊúçÂä°Á±ªÂûã: ${booking.serviceType}
- Date & Time | Êó•ÊúüÊó∂Èó¥: ${booking.preferredDate} ${booking.preferredTimeSlot}
- Address | Âú∞ÂùÄ: ${booking.address}
- Key Arrangement | Èí•ÂåôÂÆâÊéí: ${booking.keyArrangement}

${booking.notes ? `Notes | Â§áÊ≥®: ${booking.notes}` : ''}

Thank you for choosing our service! | ÊÑüË∞¢ÊÇ®ÈÄâÊã©Êàë‰ª¨ÁöÑÊúçÂä°ÔºÅ

Best regards | Ê≠§Ëá¥Êï¨Á§º
Property Inspection Team | Êàø‰∫ßÊ£ÄÊü•Âõ¢Èòü
            `;

            // Ê®°ÊãüÈÇÆ‰ª∂ÂèëÈÄÅÔºàÂú®ÂÆûÈôÖÁéØÂ¢É‰∏≠ÔºåËøôÈáå‰ºöË∞ÉÁî®ÁúüÂÆûÁöÑÈÇÆ‰ª∂APIÔºâ
            console.log('Email Subject:', subject);
            console.log('Email Content:', emailContent);
            
            alert(`${isModification ? 'Modification' : 'Confirmation'} email sent to ${booking.email} | ${isModification ? '‰øÆÊîπÈÄöÁü•' : 'Á°ÆËÆ§'}ÈÇÆ‰ª∂Â∑≤ÂèëÈÄÅËá≥ ${booking.email}`);
        }

        // Êó•ÂéÜÁÇπÂáªÂ§ÑÁêÜ
        function handleCalendarDayClick(dateString) {
            if (appData.selectedCalendarDate === dateString) {
                // Â¶ÇÊûúÁÇπÂáªÁöÑÊòØÂ∑≤ÈÄâÊã©ÁöÑÊó•ÊúüÔºåÂèñÊ∂àÈÄâÊã©ÔºåÊòæÁ§∫ÊâÄÊúâËÆ¢Âçï
                appData.selectedCalendarDate = null;
                appData.showAllOrders = true;
                
                // ÁßªÈô§ÊâÄÊúâÊó•ÊúüÁöÑÈÄâ‰∏≠Ê†∑Âºè
                document.querySelectorAll('.calendar-day-selected').forEach(el => {
                    el.classList.remove('calendar-day-selected', 'bg-orange-200', 'border-orange-400');
                    el.classList.add('bg-white');
                });
            } else {
                // ÈÄâÊã©Êñ∞Êó•ÊúüÔºåÊòæÁ§∫ËØ•Êó•ÊúüÁöÑËÆ¢Âçï
                appData.selectedCalendarDate = dateString;
                appData.showAllOrders = false;
                
                // ÁßªÈô§‰πãÂâçÁöÑÈÄâ‰∏≠Ê†∑Âºè
                document.querySelectorAll('.calendar-day-selected').forEach(el => {
                    el.classList.remove('calendar-day-selected', 'bg-orange-200', 'border-orange-400');
                    el.classList.add('bg-white');
                });
                
                // Ê∑ªÂä†Êñ∞ÁöÑÈÄâ‰∏≠Ê†∑Âºè
                const clickedElement = document.querySelector(`[data-date="${dateString}"]`);
                if (clickedElement) {
                    clickedElement.classList.add('calendar-day-selected', 'bg-orange-200', 'border-orange-400');
                    clickedElement.classList.remove('bg-white');
                }
            }
            
            loadOrdersList();
        }<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êàø‰∫ßÊ£ÄÊü•È¢ÑÁ∫¶Á≥ªÁªü</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 30%, #f59e0b 70%, #fbbf24 100%);
            min-height: 100vh;
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .btn-primary {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(30, 58, 138, 0.4);
        }
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(30, 58, 138, 0.5);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
        }
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.5);
        }
        .nav-active {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(30, 58, 138, 0.4);
        }
        .nav-inactive {
            background: rgba(255, 255, 255, 0.2);
            color: #1f2937;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .nav-inactive:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
        .time-slot-available {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        .time-slot-available:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }
        .time-slot-booked {
            background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
            color: #374151;
            cursor: not-allowed;
        }
        .time-slot-selected {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
            transform: scale(1.05);
        }
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .gradient-text {
            background: linear-gradient(135deg, #1e3a8a 0%, #f59e0b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .admin-bg {
            background: rgba(248, 250, 252, 0.95);
        }
    </style>
</head>
<body>
    <!-- ÂØºËà™Ê†è -->
    <nav class="glass-effect sticky top-0 z-50 mb-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col sm:flex-row justify-between items-center h-auto sm:h-16 py-4 sm:py-0">
                <div class="flex items-center mb-4 sm:mb-0">
                    <h1 class="text-2xl sm:text-3xl font-bold gradient-text">üè† Property Inspection Booking | Êàø‰∫ßÊ£ÄÊü•È¢ÑÁ∫¶Á≥ªÁªü</h1>
                </div>
                <div class="flex space-x-3">
                    <button id="customerTab" class="nav-active px-4 py-2 rounded-lg font-semibold transition-all">
                        Customer Booking | ÂÆ¢Êà∑È¢ÑÁ∫¶
                    </button>
                    <button id="adminTab" class="nav-inactive px-4 py-2 rounded-lg font-semibold transition-all">
                        Admin Panel | ÂêéÂè∞ÁÆ°ÁêÜ
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- ÂÆ¢Êà∑È¢ÑÁ∫¶ËßÜÂõæ -->
        <div id="customerView">
            <!-- Ê¨¢ËøéÂå∫Âüü -->
            <div class="text-center mb-8 fade-in">
                <div class="glass-effect p-6 sm:p-8 rounded-2xl shadow-xl card-hover">
                    <h2 class="text-2xl sm:text-4xl font-bold mb-4 gradient-text">‚ú® Professional Property Inspection Service | ‰∏ì‰∏öÊàø‰∫ßÊ£ÄÊü•ÊúçÂä°</h2>
                    <p id="welcomeText" class="text-lg sm:text-xl text-gray-700 leading-relaxed">
                        Welcome to our property inspection booking system! We provide professional and caring property inspection services. | Ê¨¢Ëøé‰ΩøÁî®Êàø‰∫ßÊ£ÄÊü•È¢ÑÁ∫¶Á≥ªÁªüÔºÅÊàë‰ª¨Êèê‰æõ‰∏ì‰∏ö„ÄÅË¥¥ÂøÉÁöÑÊàø‰∫ßÊ£ÄÊü•ÊúçÂä°„ÄÇ
                    </p>
                </div>
            </div>

            <!-- Ê≠•È™§1ÔºöÂü∫Êú¨‰ø°ÊÅØ -->
            <div id="step1">
                <div class="glass-effect rounded-2xl p-6 sm:p-8 shadow-xl card-hover">
                    <h3 class="text-xl sm:text-2xl font-bold mb-6 gradient-text">üìù Basic Information | Âü∫Êú¨‰ø°ÊÅØ</h3>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Full Name | ÂßìÂêç <span class="text-red-500">*</span>
                            </label>
                            <input type="text" id="customerName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Please enter your full name | ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÂßìÂêç">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Phone Number | ÊâãÊú∫Âè∑ <span class="text-red-500">*</span>
                            </label>
                            <input type="tel" id="phone" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Please enter your phone number | ËØ∑ËæìÂÖ•ÊâãÊú∫Âè∑">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Email Address | ÈÇÆÁÆ± <span class="text-red-500">*</span>
                            </label>
                            <input type="email" id="email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Please enter your email address | ËØ∑ËæìÂÖ•ÈÇÆÁÆ±Âú∞ÂùÄ">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Postcode | ÈÇÆÁºñ
                            </label>
                            <input type="text" id="postcode" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Please enter postcode | ËØ∑ËæìÂÖ•ÈÇÆÁºñ">
                        </div>

                        <div class="lg:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Property Address | Êàø‰∫ßÂú∞ÂùÄ <span class="text-red-500">*</span>
                            </label>
                            <input type="text" id="address" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Please enter detailed address | ËØ∑ËæìÂÖ•ËØ¶ÁªÜÂú∞ÂùÄ">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Service Type | ÊúçÂä°Á±ªÂûã <span class="text-red-500">*</span>
                            </label>
                            <select id="serviceType" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                                <option value="Mid-term Inspection | Êúü‰∏≠Ê£ÄÊü•">Mid-term Inspection | Êúü‰∏≠Ê£ÄÊü•</option>
                                <option value="Final Inspection | ÊúüÊú´Ê£ÄÊü•">Final Inspection | ÊúüÊú´Ê£ÄÊü•</option>
                                <option value="Property Viewing | ÂÆûÂú∞ÁúãÊàø">Property Viewing | ÂÆûÂú∞ÁúãÊàø</option>
                                <option value="Virtual Viewing | ËøûÁ∫øÁúãÊàø">Virtual Viewing | ËøûÁ∫øÁúãÊàø</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Key Arrangement | Èí•ÂåôÂÆâÊéí <span class="text-red-500">*</span>
                            </label>
                            <select id="keyArrangement" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                                <option value="Customer Keeps | ÂÆ¢Êà∑‰øùÁïô">Customer Keeps | ÂÆ¢Êà∑‰øùÁïô</option>
                                <option value="Handover to Inspector | ‰∫§ÁªôÊ£ÄÊü•Âëò">Handover to Inspector | ‰∫§ÁªôÊ£ÄÊü•Âëò</option>
                                <option value="Other | ÂÖ∂‰ªñ">Other | ÂÖ∂‰ªñ</option>
                            </select>
                        </div>

                        <!-- Èí•ÂåôÂÆâÊéíÂÖ∂‰ªñÈÄâÈ°πÁöÑËØ¥Êòé -->
                        <div id="keyOtherSection" style="display: none;" class="lg:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Key Arrangement Details | Èí•ÂåôÂÆâÊéíËØ¥Êòé <span class="text-red-500">*</span>
                            </label>
                            <input type="text" id="keyOtherDetails" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Please specify the key arrangement details | ËØ∑ËØ¶ÁªÜËØ¥ÊòéÈí•ÂåôÁöÑÂÖ∑‰ΩìÂÆâÊéí">
                        </div>
                    </div>

                    <div class="mt-8 text-center">
                        <button id="nextStepBtn" class="btn-primary text-white px-6 sm:px-8 py-3 sm:py-4 rounded-lg font-semibold text-lg">
                            Next: Select Time | ‰∏ã‰∏ÄÊ≠•ÔºöÈÄâÊã©Êó∂Èó¥ ‚Üí
                        </button>
                    </div>
                </div>
            </div>

            <!-- Ê≠•È™§2ÔºöÈÄâÊã©Êó∂Èó¥ -->
            <div id="step2" style="display: none;">
                <div class="glass-effect rounded-2xl p-6 sm:p-8 shadow-xl card-hover fade-in">
                    <h3 class="text-xl sm:text-2xl font-bold mb-6 gradient-text">üìÖ Select Appointment Time | ÈÄâÊã©È¢ÑÁ∫¶Êó∂Èó¥</h3>
                    
                    <div class="mb-8">
                        <label class="block text-sm font-medium text-gray-700 mb-4">
                            Select Date | ÈÄâÊã©Êó•Êúü <span class="text-red-500">*</span>
                        </label>
                        <div id="dateGrid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3">
                            <!-- Êó•ÊúüÈÄâÈ°π -->
                        </div>
                    </div>

                    <div id="timeSlotSection" style="display: none;" class="mb-8">
                        <label class="block text-sm font-medium text-gray-700 mb-4">
                            Select Time Slot | ÈÄâÊã©Êó∂Èó¥ÊÆµ <span class="text-red-500">*</span>
                        </label>
                        <div id="timeSlotGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                            <!-- Êó∂Èó¥ÊÆµÈÄâÈ°π -->
                        </div>
                        
                        <div class="mt-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                ÂÖ∂‰ªñÊó∂Èó¥ÈúÄÊ±ÇÔºàÈùûÊ†áÂáÜÊó∂ÊÆµÔºâ
                            </label>
                            <textarea id="specialRequirements" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" rows="3" placeholder="Â¶ÇÈúÄÂÖ∂‰ªñÊó∂Èó¥ÂÆâÊéíÔºåËØ∑Âú®Ê≠§ËØ¥ÊòéÔºà‰∏ç‰øùËØÅËÉΩÊª°Ë∂≥Ôºâ"></textarea>
                        </div>
                    </div>

                    <div class="mb-8">
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Â§áÊ≥®
                        </label>
                        <textarea id="notes" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" rows="3" placeholder="Â¶ÇÊúâÂÖ∂‰ªñÈúÄË¶ÅËØ¥ÊòéÁöÑ‰∫ãÈ°πÔºåËØ∑Âú®Ê≠§Â°´ÂÜô"></textarea>
                    </div>

                    <div class="flex flex-col sm:flex-row justify-between gap-4">
                        <button id="prevStepBtn" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all">
                            ‚Üê ‰∏ä‰∏ÄÊ≠•
                        </button>
                        <button id="submitBtn" class="btn-primary text-white px-6 sm:px-8 py-3 rounded-lg font-semibold opacity-50 cursor-not-allowed" disabled>
                            Êèê‰∫§È¢ÑÁ∫¶
                        </button>
                    </div>
                </div>
            </div>

            <!-- Ê≠•È™§3ÔºöÁ°ÆËÆ§È°µÈù¢ -->
            <div id="step3" style="display: none;">
                <div class="glass-effect rounded-2xl p-6 sm:p-8 shadow-xl text-center card-hover fade-in">
                    <div class="text-4xl sm:text-6xl mb-6">‚úÖ</div>
                    <h2 class="text-2xl sm:text-3xl font-bold text-green-600 mb-4">Booking Submitted Successfully! | È¢ÑÁ∫¶Êèê‰∫§ÊàêÂäüÔºÅ</h2>
                    
                    <div class="bg-green-50 border-2 border-green-200 rounded-lg p-6 mb-6">
                        <p class="text-lg text-green-800 mb-2">Your order number is | ÊÇ®ÁöÑËÆ¢ÂçïÂè∑ÊòØÔºö</p>
                        <p id="orderNumber" class="text-2xl sm:text-3xl font-bold text-green-900"></p>
                        <p class="text-sm text-green-600 mt-2">Please save this order number for future reference | ËØ∑‰øùÂ≠òÊ≠§ËÆ¢ÂçïÂè∑Ôºå‰ª•‰æøÂêéÁª≠Êü•ËØ¢</p>
                    </div>

                    <div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-6 mb-6 text-left">
                        <h3 class="font-bold text-blue-900 mb-3">Booking Details | È¢ÑÁ∫¶ËØ¶ÊÉÖÔºö</h3>
                        <div id="bookingDetails" class="space-y-2 text-blue-800">
                            <!-- È¢ÑÁ∫¶ËØ¶ÊÉÖ -->
                        </div>
                    </div>

                    <div class="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-6 mb-6 text-left">
                        <h3 class="font-bold text-yellow-900 mb-3">üìã Ê≥®ÊÑè‰∫ãÈ°πÔºö</h3>
                        <div id="noticeText" class="text-yellow-800 whitespace-pre-line">
                            ËØ∑Ê≥®ÊÑèÔºö
‚Ä¢ ËØ∑Á°Æ‰øùÈ¢ÑÁ∫¶Êó∂Èó¥ÂáÜÁ°ÆÊó†ËØØ
‚Ä¢ Â¶ÇÈúÄÂèñÊ∂àÊàñ‰øÆÊîπÔºåËØ∑ÊèêÂâç24Â∞èÊó∂ËÅîÁ≥ª
‚Ä¢ Ê£ÄÊü•ÂΩìÂ§©ËØ∑ÂáÜÂ§áÂ•ΩÁõ∏ÂÖ≥Êñá‰ª∂
‚Ä¢ Â¶ÇÊúâÁâπÊÆäË¶ÅÊ±ÇÔºåËØ∑Âú®Â§áÊ≥®‰∏≠ËØ¥Êòé
                        </div>
                    </div>

                    <div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-6 mb-6 text-left">
                        <h3 class="font-bold text-blue-900 mb-3">üì¢ ÈáçË¶ÅÊèêÁ§∫Ôºö</h3>
                        <div id="afterSubmitNotice" class="text-blue-800 whitespace-pre-line">
                            Êàë‰ª¨‰ºöÂú®24Â∞èÊó∂ÂÜÖ‰∏éÊÇ®Á°ÆËÆ§È¢ÑÁ∫¶ËØ¶ÊÉÖ„ÄÇ
Â¶ÇÊúâ‰ªª‰ΩïÁñëÈóÆÔºåËØ∑ÈöèÊó∂ËÅîÁ≥ªÊàë‰ª¨„ÄÇ
Ë∞¢Ë∞¢ÊÇ®ÁöÑ‰ø°‰ªªÔºÅ
                        </div>
                    </div>

                    <div class="text-center">
                        <button id="resetBtn" class="btn-secondary text-white px-6 sm:px-8 py-3 rounded-lg font-semibold">
                            Book Other Services | È¢ÑÁ∫¶ÂÖ∂‰ªñÊúçÂä°
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÁÆ°ÁêÜÂëòËßÜÂõæ -->
        <div id="adminView" style="display: none;">
            <!-- Êó•ÂéÜËßÜÂõæ -->
            <div class="glass-effect rounded-2xl p-6 shadow-xl card-hover mb-6">
                <div class="flex flex-col sm:flex-row justify-between items-center mb-4">
                    <h3 class="text-xl font-bold gradient-text">üìÖ È¢ÑÁ∫¶Êó•ÂéÜ</h3>
                    <div class="flex items-center space-x-2 mt-4 sm:mt-0">
                        <button id="prevMonth" class="btn-primary text-white px-3 py-2 rounded-lg text-sm">‚Äπ</button>
                        <span id="currentMonthYear" class="text-lg font-semibold mx-4 text-gray-700"></span>
                        <button id="nextMonth" class="btn-primary text-white px-3 py-2 rounded-lg text-sm">‚Ä∫</button>
                    </div>
                </div>
                <div id="calendarGrid" class="grid grid-cols-7 gap-2">
                    <!-- Êó•ÂéÜÁΩëÊ†º -->
                </div>
            </div>

            <!-- ÂêéÂè∞ÁÆ°ÁêÜÊ†áÁ≠æÈ°µ -->
            <div class="flex space-x-1 bg-gray-100 p-1 rounded-lg mb-6">
                <button id="ordersTabBtn" class="flex-1 py-3 px-4 rounded-md font-medium transition-all nav-active">
                    üìã ËÆ¢ÂçïÁÆ°ÁêÜ
                </button>
                <button id="settingsTabBtn" class="flex-1 py-3 px-4 rounded-md font-medium transition-all nav-inactive">
                    ‚öôÔ∏è Á≥ªÁªüËÆæÁΩÆ
                </button>
            </div>

            <!-- ËÆ¢ÂçïÁÆ°ÁêÜ -->
            <div id="ordersTab" class="glass-effect rounded-2xl p-6 shadow-xl card-hover">
                <h3 class="text-xl font-bold gradient-text mb-6">ËÆ¢ÂçïÁÆ°ÁêÜ</h3>
                <div id="ordersList">
                    <p class="text-center text-gray-500 py-8">Ê≠£Âú®Âä†ËΩΩËÆ¢ÂçïÊï∞ÊçÆ...</p>
                </div>
            </div>

            <!-- Á≥ªÁªüËÆæÁΩÆ -->
            <div id="settingsTab" style="display: none;" class="glass-effect rounded-2xl p-6 shadow-xl card-hover">
                <h3 class="text-xl font-bold gradient-text mb-6">Á≥ªÁªüËÆæÁΩÆ</h3>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            ÂÆ¢Êà∑Á´ØÊ¨¢Ëøé‰ø°ÊÅØ
                        </label>
                        <textarea id="welcomeMessageInput" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" rows="3">Ê¨¢Ëøé‰ΩøÁî®Êàø‰∫ßÊ£ÄÊü•È¢ÑÁ∫¶Á≥ªÁªüÔºÅÊàë‰ª¨Êèê‰æõ‰∏ì‰∏ö„ÄÅË¥¥ÂøÉÁöÑÊàø‰∫ßÊ£ÄÊü•ÊúçÂä°„ÄÇ</textarea>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Êèê‰∫§ÂêéÊ≥®ÊÑè‰∫ãÈ°π
                        </label>
                        <textarea id="noticeMessageInput" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" rows="6">ËØ∑Ê≥®ÊÑèÔºö
‚Ä¢ ËØ∑Á°Æ‰øùÈ¢ÑÁ∫¶Êó∂Èó¥ÂáÜÁ°ÆÊó†ËØØ
‚Ä¢ Â¶ÇÈúÄÂèñÊ∂àÊàñ‰øÆÊîπÔºåËØ∑ÊèêÂâç24Â∞èÊó∂ËÅîÁ≥ª
‚Ä¢ Ê£ÄÊü•ÂΩìÂ§©ËØ∑ÂáÜÂ§áÂ•ΩÁõ∏ÂÖ≥Êñá‰ª∂
‚Ä¢ Â¶ÇÊúâÁâπÊÆäË¶ÅÊ±ÇÔºåËØ∑Âú®Â§áÊ≥®‰∏≠ËØ¥Êòé</textarea>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Êèê‰∫§ÂêéÈáçË¶ÅÊèêÁ§∫
                        </label>
                        <textarea id="afterSubmitNoticeInput" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" rows="4">Êàë‰ª¨‰ºöÂú®24Â∞èÊó∂ÂÜÖ‰∏éÊÇ®Á°ÆËÆ§È¢ÑÁ∫¶ËØ¶ÊÉÖ„ÄÇ
Â¶ÇÊúâ‰ªª‰ΩïÁñëÈóÆÔºåËØ∑ÈöèÊó∂ËÅîÁ≥ªÊàë‰ª¨„ÄÇ
Ë∞¢Ë∞¢ÊÇ®ÁöÑ‰ø°‰ªªÔºÅ</textarea>
                    </div>

                    <button id="saveSettingsBtn" class="btn-primary text-white px-6 py-3 rounded-lg font-semibold">
                        ‰øùÂ≠òËÆæÁΩÆ
                    </button>

                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <h4 class="font-medium text-blue-900 mb-2">üìä Êï∞ÊçÆÁªüËÆ°</h4>
                        <div id="statsGrid" class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                            <!-- ÁªüËÆ°Êï∞ÊçÆ -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Â∫îÁî®Êï∞ÊçÆ
        const appData = {
            bookings: [
                {
                    id: 1,
                    orderNumber: 'INV-InventoryHub-001',
                    customerName: 'Âº†‰∏â',
                    phone: '13800138000',
                    email: 'zhang@example.com',
                    address: 'ÊõºÂüéÂ∏Ç‰∏≠ÂøÉÂÖ¨ÂØì 123Âè∑',
                    postcode: 'M1 1AA',
                    serviceType: 'Final Inspection | ÊúüÊú´Ê£ÄÊü•',
                    preferredDate: '2025-06-15',
                    preferredTimeSlot: '10:00-11:30',
                    keyArrangement: 'Handover to Inspector | ‰∫§ÁªôÊ£ÄÊü•Âëò',
                    specialRequirements: '',
                    notes: 'ÈúÄË¶ÅÊ£ÄÊü•Âé®ÊàøÊ∞¥ÁÆ°',
                    status: 'confirmed',
                    createdAt: '2025-06-07T10:30:00Z'
                }
            ],
            settings: {
                welcomeMessage: 'Ê¨¢Ëøé‰ΩøÁî®Êàø‰∫ßÊ£ÄÊü•È¢ÑÁ∫¶Á≥ªÁªüÔºÅÊàë‰ª¨Êèê‰æõ‰∏ì‰∏ö„ÄÅË¥¥ÂøÉÁöÑÊàø‰∫ßÊ£ÄÊü•ÊúçÂä°„ÄÇ',
                noticeMessage: 'ËØ∑Ê≥®ÊÑèÔºö\n‚Ä¢ ËØ∑Á°Æ‰øùÈ¢ÑÁ∫¶Êó∂Èó¥ÂáÜÁ°ÆÊó†ËØØ\n‚Ä¢ Â¶ÇÈúÄÂèñÊ∂àÊàñ‰øÆÊîπÔºåËØ∑ÊèêÂâç24Â∞èÊó∂ËÅîÁ≥ª\n‚Ä¢ Ê£ÄÊü•ÂΩìÂ§©ËØ∑ÂáÜÂ§áÂ•ΩÁõ∏ÂÖ≥Êñá‰ª∂\n‚Ä¢ Â¶ÇÊúâÁâπÊÆäË¶ÅÊ±ÇÔºåËØ∑Âú®Â§áÊ≥®‰∏≠ËØ¥Êòé',
                afterSubmitNotice: 'Êàë‰ª¨‰ºöÂú®24Â∞èÊó∂ÂÜÖ‰∏éÊÇ®Á°ÆËÆ§È¢ÑÁ∫¶ËØ¶ÊÉÖ„ÄÇ\nÂ¶ÇÊúâ‰ªª‰ΩïÁñëÈóÆÔºåËØ∑ÈöèÊó∂ËÅîÁ≥ªÊàë‰ª¨„ÄÇ\nË∞¢Ë∞¢ÊÇ®ÁöÑ‰ø°‰ªªÔºÅ'
            },
            nextOrderNumber: 2,
            selectedDate: '',
            selectedTimeSlot: '',
            currentCalendarDate: new Date(),
            selectedCalendarDate: null, // Áî®‰∫éÊó•ÂéÜÁÇπÂáªÁ≠õÈÄâ
            showAllOrders: true // ÊéßÂà∂ÊòæÁ§∫ÊâÄÊúâËÆ¢ÂçïËøòÊòØÁâπÂÆöÊó•ÊúüËÆ¢Âçï
        };

        // Ëé∑ÂèñÂÖÉÁ¥†
        const customerTab = document.getElementById('customerTab');
        const adminTab = document.getElementById('adminTab');
        const customerView = document.getElementById('customerView');
        const adminView = document.getElementById('adminView');

        // ËßÜÂõæÂàáÊç¢
        function showCustomerView() {
            customerView.style.display = 'block';
            adminView.style.display = 'none';
            customerTab.className = 'nav-active px-4 py-2 rounded-lg font-semibold transition-all';
            adminTab.className = 'nav-inactive px-4 py-2 rounded-lg font-semibold transition-all';
        }

        function showAdminView() {
            const password = prompt('ËØ∑ËæìÂÖ•ÁÆ°ÁêÜÂëòÂØÜÁ†Å:');
            if (password === 'admin123') {
                customerView.style.display = 'none';
                adminView.style.display = 'block';
                adminTab.className = 'nav-active px-4 py-2 rounded-lg font-semibold transition-all';
                customerTab.className = 'nav-inactive px-4 py-2 rounded-lg font-semibold transition-all';
                
                // ÂàùÂßãÂåñÂêéÂè∞ÁÆ°ÁêÜ
                generateCalendar();
                showOrdersTab();
            } else if (password !== null) {
                alert('ÂØÜÁ†ÅÈîôËØØÔºÅ');
            }
        }

        // Ê≠•È™§ÊéßÂà∂
        function showStep(stepNumber) {
            document.getElementById('step1').style.display = stepNumber === 1 ? 'block' : 'none';
            document.getElementById('step2').style.display = stepNumber === 2 ? 'block' : 'none';
            document.getElementById('step3').style.display = stepNumber === 3 ? 'block' : 'none';
        }

        // È™åËØÅÁ¨¨‰∏ÄÊ≠•
        function validateStep1() {
            const required = ['customerName', 'phone', 'email', 'address', 'serviceType', 'keyArrangement'];
            for (const field of required) {
                if (!document.getElementById(field).value.trim()) {
                    alert('ËØ∑Â°´ÂÜôÊâÄÊúâÂøÖÂ°´Â≠óÊÆµÔºÅ');
                    return false;
                }
            }
            
            // Â¶ÇÊûúÈÄâÊã©‰∫Ü"ÂÖ∂‰ªñ"Èí•ÂåôÂÆâÊéíÔºåÈúÄË¶ÅÂ°´ÂÜôËØ¶ÁªÜËØ¥Êòé
            if (document.getElementById('keyArrangement').value === 'Other | ÂÖ∂‰ªñ') {
                if (!document.getElementById('keyOtherDetails').value.trim()) {
                    alert('Please specify the key arrangement details! | ËØ∑ËØ¶ÁªÜËØ¥ÊòéÈí•ÂåôÁöÑÂÖ∑‰ΩìÂÆâÊéíÔºÅ');
                    return false;
                }
            }
            
            return true;
        }

        // ÁîüÊàêÂèØÁî®Êó•Êúü
        function generateAvailableDates() {
            const dates = [];
            const today = new Date();
            
            for (let i = 1; i <= 30; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                
                if (date.getDay() >= 1 && date.getDay() <= 5) {
                    dates.push(date.toISOString().split('T')[0]);
                }
            }
            return dates;
        }

        // Ê£ÄÊü•Êó∂Èó¥ÊÆµÊòØÂê¶Ë¢´È¢ÑÁ∫¶
        function isTimeSlotBooked(date, timeSlot) {
            return appData.bookings.some(booking => 
                booking.preferredDate === date && 
                booking.preferredTimeSlot === timeSlot &&
                booking.status === 'confirmed'
            );
        }

        // ÁîüÊàêÊó•ÊúüÁΩëÊ†º
        function generateDateGrid() {
            const dates = generateAvailableDates();
            const dateGrid = document.getElementById('dateGrid');
            dateGrid.innerHTML = '';

            dates.slice(0, 12).forEach(date => {
                // Ê£ÄÊü•Ëøô‰∏™Êó•ÊúüÊòØÂê¶ËøòÊúâÂèØÁî®Êó∂Èó¥ÊÆµ
                const timeSlots = ['10:00-11:30', '11:30-13:00', '13:00-14:30'];
                const hasAvailableSlots = timeSlots.some(slot => !isTimeSlotBooked(date, slot));
                
                if (hasAvailableSlots) {
                    const dateObj = new Date(date);
                    const button = document.createElement('button');
                    button.type = 'button';
                    button.className = 'p-3 rounded-lg border-2 transition-all hover:scale-105 border-gray-200 hover:border-blue-300 hover:bg-blue-50 bg-white';
                    
                    button.addEventListener('click', function() {
                        selectDate(date, this);
                    });
                    
                    button.innerHTML = `
                        <div class="text-sm font-medium">
                            ${dateObj.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' })}
                        </div>
                        <div class="text-xs text-gray-500">
                            ${dateObj.toLocaleDateString('zh-CN', { weekday: 'short' })}
                        </div>
                    `;
                    dateGrid.appendChild(button);
                }
            });
        }

        // ÈÄâÊã©Êó•Êúü
        function selectDate(date, button) {
            // ÈáçÁΩÆÊâÄÊúâÊó•ÊúüÊåâÈíÆÊ†∑Âºè
            document.querySelectorAll('#dateGrid button').forEach(btn => {
                btn.className = 'p-3 rounded-lg border-2 transition-all hover:scale-105 border-gray-200 hover:border-blue-300 hover:bg-blue-50 bg-white';
            });

            // ËÆæÁΩÆÈÄâ‰∏≠Áä∂ÊÄÅ
            button.className = 'p-3 rounded-lg border-2 transition-all hover:scale-105 border-orange-500 bg-orange-50 text-orange-700';
            appData.selectedDate = date;
            appData.selectedTimeSlot = '';
            
            generateTimeSlotGrid();
            document.getElementById('timeSlotSection').style.display = 'block';
            updateSubmitButton();
        }

        // ÁîüÊàêÊó∂Èó¥ÊÆµÁΩëÊ†º
        function generateTimeSlotGrid() {
            const timeSlots = ['10:00-11:30', '11:30-13:00', '13:00-14:30'];
            const timeSlotGrid = document.getElementById('timeSlotGrid');
            timeSlotGrid.innerHTML = '';

            timeSlots.forEach(timeSlot => {
                const isBooked = isTimeSlotBooked(appData.selectedDate, timeSlot);
                const button = document.createElement('button');
                button.type = 'button';
                
                if (isBooked) {
                    button.className = 'time-slot-booked p-4 rounded-lg font-medium transition-all';
                    button.disabled = true;
                    button.innerHTML = `
                        <div class="text-lg">${timeSlot}</div>
                        <div class="text-sm mt-1">Â∑≤È¢ÑÁ∫¶</div>
                    `;
                } else {
                    button.className = 'time-slot-available p-4 rounded-lg font-medium transition-all';
                    button.addEventListener('click', function() {
                        selectTimeSlot(timeSlot, this);
                    });
                    button.innerHTML = `
                        <div class="text-lg">${timeSlot}</div>
                        <div class="text-sm mt-1">ÂèØÈ¢ÑÁ∫¶</div>
                    `;
                }
                
                timeSlotGrid.appendChild(button);
            });
        }

        // ÈÄâÊã©Êó∂Èó¥ÊÆµ
        function selectTimeSlot(timeSlot, button) {
            document.querySelectorAll('#timeSlotGrid button:not(:disabled)').forEach(btn => {
                btn.className = 'time-slot-available p-4 rounded-lg font-medium transition-all';
                btn.innerHTML = btn.innerHTML.replace('Â∑≤ÈÄâÊã©', 'ÂèØÈ¢ÑÁ∫¶');
            });

            button.className = 'time-slot-selected p-4 rounded-lg font-medium transition-all';
            button.innerHTML = `
                <div class="text-lg">${timeSlot}</div>
                <div class="text-sm mt-1">Â∑≤ÈÄâÊã©</div>
            `;
            
            appData.selectedTimeSlot = timeSlot;
            updateSubmitButton();
        }

        // Êõ¥Êñ∞Êèê‰∫§ÊåâÈíÆ
        function updateSubmitButton() {
            const submitBtn = document.getElementById('submitBtn');
            if (appData.selectedDate && appData.selectedTimeSlot) {
                submitBtn.disabled = false;
                submitBtn.className = 'btn-primary text-white px-6 sm:px-8 py-3 rounded-lg font-semibold';
            } else {
                submitBtn.disabled = true;
                submitBtn.className = 'btn-primary text-white px-6 sm:px-8 py-3 rounded-lg font-semibold opacity-50 cursor-not-allowed';
            }
        }

        // Êèê‰∫§È¢ÑÁ∫¶
        function submitBooking() {
            const orderNum = appData.nextOrderNumber.toString().padStart(3, '0');
            const newOrderNumber = `INV-InventoryHub-${orderNum}`;
            appData.nextOrderNumber++;

            let keyArrangement = document.getElementById('keyArrangement').value;
            if (keyArrangement === 'Other | ÂÖ∂‰ªñ') {
                keyArrangement = 'Other | ÂÖ∂‰ªñÔºö' + document.getElementById('keyOtherDetails').value;
            }

            const newBooking = {
                id: Date.now(),
                orderNumber: newOrderNumber,
                customerName: document.getElementById('customerName').value,
                phone: document.getElementById('phone').value,
                email: document.getElementById('email').value,
                address: document.getElementById('address').value,
                postcode: document.getElementById('postcode').value,
                serviceType: document.getElementById('serviceType').value,
                preferredDate: appData.selectedDate,
                preferredTimeSlot: appData.selectedTimeSlot,
                keyArrangement: keyArrangement,
                specialRequirements: document.getElementById('specialRequirements').value,
                notes: document.getElementById('notes').value,
                status: 'pending',
                createdAt: new Date().toISOString()
            };

            appData.bookings.push(newBooking);
            
            document.getElementById('orderNumber').textContent = newOrderNumber;
            document.getElementById('bookingDetails').innerHTML = `
                <p><strong>ÂßìÂêçÔºö</strong>${newBooking.customerName}</p>
                <p><strong>ËÅîÁ≥ªÊñπÂºèÔºö</strong>${newBooking.phone}</p>
                <p><strong>ÊúçÂä°Á±ªÂûãÔºö</strong>${newBooking.serviceType}</p>
                <p><strong>È¢ÑÁ∫¶Êó•ÊúüÔºö</strong>${newBooking.preferredDate}</p>
                <p><strong>È¢ÑÁ∫¶Êó∂Èó¥Ôºö</strong>${newBooking.preferredTimeSlot}</p>
                <p><strong>Èí•ÂåôÂÆâÊéíÔºö</strong>${newBooking.keyArrangement}</p>
            `;
            
            showStep(3);
        }

        // ÈáçÁΩÆË°®Âçï
        function resetForm() {
            const fields = ['customerName', 'phone', 'email', 'address', 'postcode', 'specialRequirements', 'notes', 'keyOtherDetails'];
            fields.forEach(field => {
                if (document.getElementById(field)) {
                    document.getElementById(field).value = '';
                }
            });
            
            // ÈáçÁΩÆ‰∏ãÊãâÊ°Ü‰∏∫Á¨¨‰∏Ä‰∏™ÈÄâÈ°π
            document.getElementById('serviceType').selectedIndex = 0;
            document.getElementById('keyArrangement').selectedIndex = 0;
            
            // ÈöêËóèÈí•ÂåôÂÖ∂‰ªñÈÄâÈ°πÂå∫Âüü
            document.getElementById('keyOtherSection').style.display = 'none';
            
            appData.selectedDate = '';
            appData.selectedTimeSlot = '';
            document.getElementById('timeSlotSection').style.display = 'none';
            
            showStep(1);
        }

        // ÁîüÊàêÊó•ÂéÜ
        function generateCalendar() {
            const year = appData.currentCalendarDate.getFullYear();
            const month = appData.currentCalendarDate.getMonth();
            
            // Êõ¥Êñ∞Êúà‰ªΩÂπ¥‰ªΩÊòæÁ§∫
            document.getElementById('currentMonthYear').textContent = 
                `${year}Âπ¥${month + 1}Êúà`;
            
            const firstDay = new Date(year, month, 1);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());
            
            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';
            
            // Ê∑ªÂä†ÊòüÊúüÊ†áÈ¢ò
            const weekDays = ['Êó•', '‰∏Ä', '‰∫å', '‰∏â', 'Âõõ', '‰∫î', 'ÂÖ≠'];
            weekDays.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'text-center font-semibold text-gray-600 p-2';
                dayHeader.textContent = day;
                calendarGrid.appendChild(dayHeader);
            });
            
            // ÁîüÊàêÊó•ÂéÜÊ†ºÂ≠ê
            for (let i = 0; i < 42; i++) {
                const currentDate = new Date(startDate);
                currentDate.setDate(startDate.getDate() + i);
                
                const dayElement = document.createElement('div');
                const dateString = currentDate.toISOString().split('T')[0];
                
                dayElement.className = 'relative p-2 text-center border border-gray-100 rounded min-h-[60px] flex flex-col justify-center cursor-pointer transition-all hover:bg-gray-50';
                dayElement.setAttribute('data-date', dateString);
                
                const isCurrentMonth = currentDate.getMonth() === month;
                const hasBookings = appData.bookings.some(booking => 
                    booking.preferredDate === dateString && booking.status === 'confirmed'
                );
                
                // Ê£ÄÊü•ÊòØÂê¶ÊòØÈÄâ‰∏≠ÁöÑÊó•Êúü
                const isSelected = appData.selectedCalendarDate === dateString;
                
                if (isCurrentMonth) {
                    if (isSelected) {
                        dayElement.className += ' calendar-day-selected bg-orange-200 border-orange-400 text-gray-900';
                    } else {
                        dayElement.className += ' bg-white text-gray-900';
                        if (hasBookings) {
                            dayElement.className += ' bg-blue-100 border-blue-300';
                        }
                    }
                } else {
                    dayElement.className += ' bg-gray-50 text-gray-400';
                }
                
                // Ê∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂
                if (isCurrentMonth) {
                    dayElement.addEventListener('click', () => handleCalendarDayClick(dateString));
                }
                
                dayElement.innerHTML = `
                    <div class="text-sm font-medium">${currentDate.getDate()}</div>
                    ${hasBookings ? '<div class="w-2 h-2 bg-blue-500 rounded-full mx-auto mt-1"></div>' : ''}
                `;
                
                calendarGrid.appendChild(dayElement);
            }
        }

        // ÁÆ°ÁêÜÂëòÊ†áÁ≠æÈ°µÂàáÊç¢
        function showOrdersTab() {
            document.getElementById('ordersTab').style.display = 'block';
            document.getElementById('settingsTab').style.display = 'none';
            document.getElementById('ordersTabBtn').className = 'flex-1 py-3 px-4 rounded-md font-medium transition-all nav-active';
            document.getElementById('settingsTabBtn').className = 'flex-1 py-3 px-4 rounded-md font-medium transition-all nav-inactive';
            loadOrdersList();
        }

        function showSettingsTab() {
            document.getElementById('ordersTab').style.display = 'none';
            document.getElementById('settingsTab').style.display = 'block';
            document.getElementById('ordersTabBtn').className = 'flex-1 py-3 px-4 rounded-md font-medium transition-all nav-inactive';
            document.getElementById('settingsTabBtn').className = 'flex-1 py-3 px-4 rounded-md font-medium transition-all nav-active';
            
            // Âä†ËΩΩÂΩìÂâçËÆæÁΩÆ
            document.getElementById('welcomeMessageInput').value = appData.settings.welcomeMessage;
            document.getElementById('noticeMessageInput').value = appData.settings.noticeMessage;
            document.getElementById('afterSubmitNoticeInput').value = appData.settings.afterSubmitNotice;
            updateStats();
        }

        // Âä†ËΩΩËÆ¢ÂçïÂàóË°®
        function loadOrdersList() {
            const ordersList = document.getElementById('ordersList');
            
            if (appData.bookings.length === 0) {
                ordersList.innerHTML = `
                    <div class="text-center py-12">
                        <div class="text-4xl mb-4">üìã</div>
                        <p class="text-gray-500">ÊöÇÊó†ËÆ¢Âçï</p>
                    </div>
                `;
                return;
            }

            // Á≠õÈÄâËÆ¢ÂçïÔºöÂ¶ÇÊûúÈÄâÊã©‰∫ÜÁâπÂÆöÊó•ÊúüÔºåÂè™ÊòæÁ§∫ËØ•Êó•ÊúüÁöÑËÆ¢Âçï
            let filteredBookings = appData.bookings;
            if (!appData.showAllOrders && appData.selectedCalendarDate) {
                filteredBookings = appData.bookings.filter(booking => 
                    booking.preferredDate === appData.selectedCalendarDate
                );
            }

            ordersList.innerHTML = filteredBookings.slice().reverse().map(booking => `
                <div class="admin-bg rounded-lg p-4 mb-4 card-hover border border-gray-200">
                    <div class="flex flex-col sm:flex-row justify-between items-start mb-3">
                        <div>
                            <h4 class="font-bold text-lg text-blue-900">${booking.orderNumber}</h4>
                            <p class="text-gray-600">${booking.customerName} ‚Ä¢ ${booking.phone}</p>
                        </div>
                        <span class="mt-2 sm:mt-0 px-3 py-1 rounded-full text-xs font-medium ${getStatusBadgeClass(booking.status)}">
                            ${getStatusLabel(booking.status)}
                        </span>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4">
                        <div>
                            <p class="text-gray-700"><strong>ÊúçÂä°Á±ªÂûãÔºö</strong>${booking.serviceType}</p>
                            <p class="text-gray-700"><strong>È¢ÑÁ∫¶Êó∂Èó¥Ôºö</strong>${booking.preferredDate} ${booking.preferredTimeSlot}</p>
                            <p class="text-gray-700"><strong>Èí•ÂåôÂÆâÊéíÔºö</strong>${booking.keyArrangement}</p>
                        </div>
                        <div>
                            <p class="text-gray-700"><strong>Âú∞ÂùÄÔºö</strong>${booking.address}</p>
                            <p class="text-gray-700"><strong>ÈÇÆÁÆ±Ôºö</strong>${booking.email}</p>
                        </div>
                    </div>

                    ${booking.notes ? `
                        <div class="mb-4">
                            <p class="text-gray-700"><strong>Notes | Â§áÊ≥®Ôºö</strong></p>
                            <p class="text-gray-600 bg-gray-100 p-2 rounded">${booking.notes}</p>
                        </div>
                    ` : ''}

                    <div class="flex flex-col sm:flex-row gap-2">
                        ${booking.status === 'pending' ? `
                            <button data-booking-id="${booking.id}" class="confirm-btn btn-primary text-white px-4 py-2 rounded-lg text-sm">
                                Confirm | Á°ÆËÆ§È¢ÑÁ∫¶
                            </button>
                        ` : ''}
                        
                        ${booking.status === 'confirmed' ? `
                            <button data-booking-id="${booking.id}" class="modify-btn btn-secondary text-white px-4 py-2 rounded-lg text-sm">
                                Modify Time | ‰øÆÊîπÊó∂Èó¥
                            </button>
                        ` : ''}
                        
                        <button data-booking-id="${booking.id}" class="cancel-btn bg-red-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-600 transition-all">
                            ${booking.status === 'confirmed' ? 'Cancel | ÂèñÊ∂à' : 'Cancel | ÂèñÊ∂àÈ¢ÑÁ∫¶'}
                        </button>
                        
                        <button data-booking-id="${booking.id}" class="delete-btn bg-gray-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-gray-600 transition-all">
                            Delete | Âà†Èô§
                        </button>
                    </div>
                </div>
            `).join('');
            
            // ÈáçÊñ∞ÁªëÂÆöÊåâÈíÆ‰∫ã‰ª∂
            document.querySelectorAll('.confirm-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const bookingId = parseInt(this.dataset.bookingId);
                    confirmBooking(bookingId);
                });
            });
            
            document.querySelectorAll('.cancel-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const bookingId = parseInt(this.dataset.bookingId);
                    cancelBooking(bookingId);
                });
            });

            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const bookingId = parseInt(this.dataset.bookingId);
                    deleteBooking(bookingId);
                });
            });

            document.querySelectorAll('.modify-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const bookingId = parseInt(this.dataset.bookingId);
                    modifyBookingTime(bookingId);
                });
            });
        }

        // Ëé∑ÂèñÁä∂ÊÄÅÊ†∑ÂºèÁ±ª
        function getStatusBadgeClass(status) {
            const classes = {
                pending: 'bg-yellow-100 text-yellow-800',
                confirmed: 'bg-green-100 text-green-800',
                completed: 'bg-blue-100 text-blue-800',
                cancelled: 'bg-gray-100 text-gray-800'
            };
            return classes[status] || classes.pending;
        }

        // Ëé∑ÂèñÁä∂ÊÄÅÊ†áÁ≠æ
        function getStatusLabel(status) {
            const labels = {
                pending: 'ÂæÖÁ°ÆËÆ§',
                confirmed: 'Â∑≤Á°ÆËÆ§',
                completed: 'Â∑≤ÂÆåÊàê',
                cancelled: 'Â∑≤ÂèñÊ∂à'
            };
            return labels[status] || 'ÂæÖÁ°ÆËÆ§';
        }

        // Á°ÆËÆ§È¢ÑÁ∫¶
        function confirmBooking(bookingId) {
            const booking = appData.bookings.find(b => b.id === bookingId);
            if (booking) {
                booking.status = 'confirmed';
                loadOrdersList();
                generateCalendar(); // Êõ¥Êñ∞Êó•ÂéÜÊòæÁ§∫
                
                // ÂèëÈÄÅÁ°ÆËÆ§ÈÇÆ‰ª∂
                sendConfirmationEmail(booking, false);
            }
        }

        // ÂèñÊ∂àÈ¢ÑÁ∫¶
        function cancelBooking(bookingId) {
            if (confirm('Are you sure you want to cancel this booking? | Á°ÆÂÆöË¶ÅÂèñÊ∂àËøô‰∏™È¢ÑÁ∫¶ÂêóÔºü')) {
                const booking = appData.bookings.find(b => b.id === bookingId);
                if (booking) {
                    booking.status = 'cancelled';
                    loadOrdersList();
                    generateCalendar(); // Êõ¥Êñ∞Êó•ÂéÜÊòæÁ§∫
                    
                    // ÂèëÈÄÅÂèñÊ∂àÈÄöÁü•ÈÇÆ‰ª∂
                    const emailContent = `
Dear ${booking.customerName} | ‰∫≤Áà±ÁöÑ ${booking.customerName}Ôºå

Your booking has been cancelled. | ÊÇ®ÁöÑÈ¢ÑÁ∫¶Â∑≤Ë¢´ÂèñÊ∂à„ÄÇ

Booking Details | È¢ÑÁ∫¶ËØ¶ÊÉÖÔºö
- Order Number | ËÆ¢ÂçïÂè∑: ${booking.orderNumber}
- Service Type | ÊúçÂä°Á±ªÂûã: ${booking.serviceType}
- Original Date & Time | ÂéüÂÆöÊó•ÊúüÊó∂Èó¥: ${booking.preferredDate} ${booking.preferredTimeSlot}

If you have any questions, please contact us. | Â¶ÇÊúâÁñëÈóÆÔºåËØ∑ËÅîÁ≥ªÊàë‰ª¨„ÄÇ

Best regards | Ê≠§Ëá¥Êï¨Á§º
Property Inspection Team | Êàø‰∫ßÊ£ÄÊü•Âõ¢Èòü
                    `;
                    
                    console.log('Cancellation Email:', emailContent);
                    alert(`Cancellation email sent to ${booking.email} | ÂèñÊ∂àÈÄöÁü•ÈÇÆ‰ª∂Â∑≤ÂèëÈÄÅËá≥ ${booking.email}`);
                }
            }
        }

        // Êõ¥Êñ∞ËÆæÁΩÆ
        function updateSettings() {
            appData.settings.welcomeMessage = document.getElementById('welcomeMessageInput').value;
            appData.settings.noticeMessage = document.getElementById('noticeMessageInput').value;
            appData.settings.afterSubmitNotice = document.getElementById('afterSubmitNoticeInput').value;
            
            // Êõ¥Êñ∞ÂÆ¢Êà∑Á´ØÊòæÁ§∫
            document.getElementById('welcomeText').textContent = appData.settings.welcomeMessage;
            document.getElementById('noticeText').textContent = appData.settings.noticeMessage;
            document.getElementById('afterSubmitNotice').textContent = appData.settings.afterSubmitNotice;
            
            alert('ËÆæÁΩÆÂ∑≤‰øùÂ≠òÔºÅ');
        }

        // Êõ¥Êñ∞ÁªüËÆ°Êï∞ÊçÆ
        function updateStats() {
            const statsGrid = document.getElementById('statsGrid');
            const totalBookings = appData.bookings.length;
            const pendingBookings = appData.bookings.filter(b => b.status === 'pending').length;
            const confirmedBookings = appData.bookings.filter(b => b.status === 'confirmed').length;
            const completedBookings = appData.bookings.filter(b => b.status === 'completed').length;

            statsGrid.innerHTML = `
                <div class="bg-white p-3 rounded-lg border border-gray-200">
                    <div class="text-2xl font-bold text-blue-900">${totalBookings}</div>
                    <div class="text-sm text-blue-700">ÊÄªËÆ¢Âçï</div>
                </div>
                <div class="bg-white p-3 rounded-lg border border-gray-200">
                    <div class="text-2xl font-bold text-yellow-600">${pendingBookings}</div>
                    <div class="text-sm text-yellow-700">ÂæÖÁ°ÆËÆ§</div>
                </div>
                <div class="bg-white p-3 rounded-lg border border-gray-200">
                    <div class="text-2xl font-bold text-green-600">${confirmedBookings}</div>
                    <div class="text-sm text-green-700">Â∑≤Á°ÆËÆ§</div>
                </div>
                <div class="bg-white p-3 rounded-lg border border-gray-200">
                    <div class="text-2xl font-bold text-blue-600">${completedBookings}</div>
                    <div class="text-sm text-blue-700">Â∑≤ÂÆåÊàê</div>
                </div>
            `;
        }

        // ‰∫ã‰ª∂ÁªëÂÆö
        function bindEvents() {
            // ÂØºËà™ÊåâÈíÆ
            customerTab.addEventListener('click', showCustomerView);
            adminTab.addEventListener('click', showAdminView);

            // Ê≠•È™§ÊéßÂà∂ÊåâÈíÆ
            document.getElementById('nextStepBtn').addEventListener('click', function() {
                if (validateStep1()) {
                    showStep(2);
                    generateDateGrid();
                }
            });

            document.getElementById('prevStepBtn').addEventListener('click', function() {
                showStep(1);
            });

            document.getElementById('submitBtn').addEventListener('click', submitBooking);
            document.getElementById('resetBtn').addEventListener('click', resetForm);

            // Èí•ÂåôÂÆâÊéíÂèòÂåñÁõëÂê¨
            document.getElementById('keyArrangement').addEventListener('change', function() {
                const keyOtherSection = document.getElementById('keyOtherSection');
                if (this.value === 'Other | ÂÖ∂‰ªñ') {
                    keyOtherSection.style.display = 'block';
                } else {
                    keyOtherSection.style.display = 'none';
                    document.getElementById('keyOtherDetails').value = '';
                }
            });

            // Êó•ÂéÜÂØºËà™ÊåâÈíÆ
            document.getElementById('prevMonth').addEventListener('click', function() {
                appData.currentCalendarDate.setMonth(appData.currentCalendarDate.getMonth() - 1);
                generateCalendar();
            });

            document.getElementById('nextMonth').addEventListener('click', function() {
                appData.currentCalendarDate.setMonth(appData.currentCalendarDate.getMonth() + 1);
                generateCalendar();
            });

            // ÂêéÂè∞ÁÆ°ÁêÜÊ†áÁ≠æÂàáÊç¢
            document.getElementById('ordersTabBtn').addEventListener('click', showOrdersTab);
            document.getElementById('settingsTabBtn').addEventListener('click', showSettingsTab);

            // ‰øùÂ≠òËÆæÁΩÆÊåâÈíÆ
            document.getElementById('saveSettingsBtn').addEventListener('click', updateSettings);
        }

        // È°µÈù¢ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            bindEvents();
            showCustomerView();
            
            // ËÆæÁΩÆÈªòËÆ§ÈÄâÈ°π
            document.getElementById('serviceType').selectedIndex = 0;
            document.getElementById('keyArrangement').selectedIndex = 0;
        });
    </script>
</body>
</html>