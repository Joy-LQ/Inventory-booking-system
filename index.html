        // åˆ é™¤é¢„çº¦
        function deleteBooking(bookingId) {
            if (confirm('Are you sure you want to delete this booking? This action cannot be undone. | ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¢„çº¦å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚')) {
                const bookingIndex = appData.bookings.findIndex(b => b.id === bookingId);
                if (bookingIndex !== -1) {
                    appData.bookings.splice(bookingIndex, 1);
                    loadOrdersList();
                    generateCalendar(); // æ›´æ–°æ—¥å†æ˜¾ç¤º
                    alert('Booking deleted successfully. | é¢„çº¦å·²æˆåŠŸåˆ é™¤ã€‚');
                }
            }
        }

        // ä¿®æ”¹é¢„çº¦æ—¶é—´
        function modifyBookingTime(bookingId) {
            const booking = appData.bookings.find(b => b.id === bookingId);
            if (!booking) return;

            const newDate = prompt(`Current date: ${booking.preferredDate}\nEnter new date (YYYY-MM-DD): | å½“å‰æ—¥æœŸï¼š${booking.preferredDate}\nè¯·è¾“å…¥æ–°æ—¥æœŸ (YYYY-MM-DD)ï¼š`, booking.preferredDate);
            if (!newDate) return;

            const newTime = prompt(`Current time: ${booking.preferredTimeSlot}\nEnter new time slot: | å½“å‰æ—¶é—´ï¼š${booking.preferredTimeSlot}\nè¯·è¾“å…¥æ–°æ—¶é—´æ®µï¼š`, booking.preferredTimeSlot);
            if (!newTime) return;

            // æ£€æŸ¥æ–°æ—¶é—´æ˜¯å¦å†²çª
            const isConflict = appData.bookings.some(b => 
                b.id !== bookingId && 
                b.preferredDate === newDate && 
                b.preferredTimeSlot === newTime && 
                b.status === 'confirmed'
            );

            if (isConflict) {
                alert('Time slot conflict! Please choose another time. | æ—¶é—´å†²çªï¼è¯·é€‰æ‹©å…¶ä»–æ—¶é—´ã€‚');
                return;
            }

            booking.preferredDate = newDate;
            booking.preferredTimeSlot = newTime;
            
            loadOrdersList();
            generateCalendar();
            
            // å‘é€ç¡®è®¤é‚®ä»¶
            sendConfirmationEmail(booking, true);
        }

        // å‘é€ç¡®è®¤é‚®ä»¶
        function sendConfirmationEmail(booking, isModification = false) {
            const emailType = isModification ? 'modification' : 'confirmation';
            const subject = isModification ? 
                `Booking Time Modified | é¢„çº¦æ—¶é—´å·²ä¿®æ”¹ - ${booking.orderNumber}` : 
                `Booking Confirmed | é¢„çº¦å·²ç¡®è®¤ - ${booking.orderNumber}`;
            
            const emailContent = `
Dear ${booking.customerName} | äº²çˆ±çš„ ${booking.customerName}ï¼Œ

${isModification ? 
    'Your booking time has been modified. | æ‚¨çš„é¢„çº¦æ—¶é—´å·²è¢«ä¿®æ”¹ã€‚' : 
    'Your booking has been confirmed. | æ‚¨çš„é¢„çº¦å·²ç¡®è®¤ã€‚'}

Booking Details | é¢„çº¦è¯¦æƒ…ï¼š
- Order Number | è®¢å•å·: ${booking.orderNumber}
- Service Type | æœåŠ¡ç±»å‹: ${booking.serviceType}
- Date & Time | æ—¥æœŸæ—¶é—´: ${booking.preferredDate} ${booking.preferredTimeSlot}
- Address | åœ°å€: ${booking.address}
- Key Arrangement | é’¥åŒ™å®‰æ’: ${booking.keyArrangement}

${booking.notes ? `Notes | å¤‡æ³¨: ${booking.notes}` : ''}

Thank you for choosing our service! | æ„Ÿè°¢æ‚¨é€‰æ‹©æˆ‘ä»¬çš„æœåŠ¡ï¼

Best regards | æ­¤è‡´æ•¬ç¤¼
Property Inspection Team | æˆ¿äº§æ£€æŸ¥å›¢é˜Ÿ
            `;

            // æ¨¡æ‹Ÿé‚®ä»¶å‘é€ï¼ˆåœ¨å®é™…ç¯å¢ƒä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨çœŸå®çš„é‚®ä»¶APIï¼‰
            console.log('Email Subject:', subject);
            console.log('Email Content:', emailContent);
            
            alert(`${isModification ? 'Modification' : 'Confirmation'} email sent to ${booking.email} | ${isModification ? 'ä¿®æ”¹é€šçŸ¥' : 'ç¡®è®¤'}é‚®ä»¶å·²å‘é€è‡³ ${booking.email}`);
        }

        // æ—¥å†ç‚¹å‡»å¤„ç†
        function handleCalendarDayClick(dateString) {
            if (appData.selectedCalendarDate === dateString) {
                // å¦‚æœç‚¹å‡»çš„æ˜¯å·²é€‰æ‹©çš„æ—¥æœŸï¼Œå–æ¶ˆé€‰æ‹©ï¼Œæ˜¾ç¤ºæ‰€æœ‰è®¢å•
                appData.selectedCalendarDate = null;
                appData.showAllOrders = true;
                
                // ç§»é™¤æ‰€æœ‰æ—¥æœŸçš„é€‰ä¸­æ ·å¼
                document.querySelectorAll('.calendar-day-selected').forEach(el => {
                    el.classList.remove('calendar-day-selected', 'bg-orange-200', 'border-orange-400');
                    el.classList.add('bg-white');
                });
            } else {
                // é€‰æ‹©æ–°æ—¥æœŸï¼Œæ˜¾ç¤ºè¯¥æ—¥æœŸçš„è®¢å•
                appData.selectedCalendarDate = dateString;
                appData.showAllOrders = false;
                
                // ç§»é™¤ä¹‹å‰çš„é€‰ä¸­æ ·å¼
                document.querySelectorAll('.calendar-day-selected').forEach(el => {
                    el.classList.remove('calendar-day-selected', 'bg-orange-200', 'border-orange-400');
                    el.classList.add('bg-white');
                });
                
                // æ·»åŠ æ–°çš„é€‰ä¸­æ ·å¼
                const clickedElement = document.querySelector(`[data-date="${dateString}"]`);
                if (clickedElement) {
                    clickedElement.classList.add('calendar-day-selected', 'bg-orange-200', 'border-orange-400');
                    clickedElement.classList.remove('bg-white');
                }
            }
            
            loadOrdersList();
        }<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ¿äº§æ£€æŸ¥é¢„çº¦ç³»ç»Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 30%, #f59e0b 70%, #fbbf24 100%);
            min-height: 100vh;
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .btn-primary {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(30, 58, 138, 0.4);
        }
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(30, 58, 138, 0.5);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
        }
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.5);
        }
        .nav-active {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(30, 58, 138, 0.4);
        }
        .nav-inactive {
            background: rgba(255, 255, 255, 0.2);
            color: #1f2937;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .nav-inactive:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
        .time-slot-available {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        .time-slot-available:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }
        .time-slot-booked {
            background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
            color: #374151;
            cursor: not-allowed;
        }
        .time-slot-selected {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
            transform: scale(1.05);
        }
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .gradient-text {
            background: linear-gradient(135deg, #1e3a8a 0%, #f59e0b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .admin-bg {
            background: rgba(248, 250, 252, 0.95);
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="glass-effect sticky top-0 z-50 mb-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col sm:flex-row justify-between items-center h-auto sm:h-16 py-4 sm:py-0">
                <div class="flex items-center mb-4 sm:mb-0">
                    <h1 class="text-2xl sm:text-3xl font-bold gradient-text">ğŸ  Property Inspection Booking | æˆ¿äº§æ£€æŸ¥é¢„çº¦ç³»ç»Ÿ</h1>
                </div>
                <div class="flex space-x-3">
                    <button id="customerTab" class="nav-active px-4 py-2 rounded-lg font-semibold transition-all">
                        Customer Booking | å®¢æˆ·é¢„çº¦
                    </button>
                    <button id="adminTab" class="nav-inactive px-4 py-2 rounded-lg font-semibold transition-all">
                        Admin Panel | åå°ç®¡ç†
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- å®¢æˆ·é¢„çº¦è§†å›¾ -->
        <div id="customerView">
            <!-- æ¬¢è¿åŒºåŸŸ -->
            <div class="text-center mb-8 fade-in">
                <div class="glass-effect p-6 sm:p-8 rounded-2xl shadow-xl card-hover">
                    <h2 class="text-2xl sm:text-4xl font-bold mb-4 gradient-text">âœ¨ Professional Property Inspection Service | ä¸“ä¸šæˆ¿äº§æ£€æŸ¥æœåŠ¡</h2>
                    <p id="welcomeText" class="text-lg sm:text-xl text-gray-700 leading-relaxed">
                        Welcome to our property inspection booking system! We provide professional and caring property inspection services. | æ¬¢è¿ä½¿ç”¨æˆ¿äº§æ£€æŸ¥é¢„çº¦ç³»ç»Ÿï¼æˆ‘ä»¬æä¾›ä¸“ä¸šã€è´´å¿ƒçš„æˆ¿äº§æ£€æŸ¥æœåŠ¡ã€‚
                    </p>
                </div>
            </div>

            <!-- æ­¥éª¤1ï¼šåŸºæœ¬ä¿¡æ¯ -->
            <div id="step1">
                <div class="glass-effect rounded-2xl p-6 sm:p-8 shadow-xl card-hover">
                    <h3 class="text-xl sm:text-2xl font-bold mb-6 gradient-text">ğŸ“ Basic Information | åŸºæœ¬ä¿¡æ¯</h3>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Full Name | å§“å <span class="text-red-500">*</span>
                            </label>
                            <input type="text" id="customerName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Please enter your full name | è¯·è¾“å…¥æ‚¨çš„å§“å">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Phone Number | æ‰‹æœºå· <span class="text-red-500">*</span>
                            </label>
                            <input type="tel" id="phone" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Please enter your phone number | è¯·è¾“å…¥æ‰‹æœºå·">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Email Address | é‚®ç®± <span class="text-red-500">*</span>
                            </label>
                            <input type="email" id="email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Please enter your email address | è¯·è¾“å…¥é‚®ç®±åœ°å€">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Postcode | é‚®ç¼–
                            </label>
                            <input type="text" id="postcode" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Please enter postcode | è¯·è¾“å…¥é‚®ç¼–">
                        </div>

                        <div class="lg:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Property Address | æˆ¿äº§åœ°å€ <span class="text-red-500">*</span>
                            </label>
                            <input type="text" id="address" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Please enter detailed address | è¯·è¾“å…¥è¯¦ç»†åœ°å€">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Service Type | æœåŠ¡ç±»å‹ <span class="text-red-500">*</span>
                            </label>
                            <select id="serviceType" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                                <option value="Mid-term Inspection | æœŸä¸­æ£€æŸ¥">Mid-term Inspection | æœŸä¸­æ£€æŸ¥</option>
                                <option value="Final Inspection | æœŸæœ«æ£€æŸ¥">Final Inspection | æœŸæœ«æ£€æŸ¥</option>
                                <option value="Property Viewing | å®åœ°çœ‹æˆ¿">Property Viewing | å®åœ°çœ‹æˆ¿</option>
                                <option value="Virtual Viewing | è¿çº¿çœ‹æˆ¿">Virtual Viewing | è¿çº¿çœ‹æˆ¿</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Key Arrangement | é’¥åŒ™å®‰æ’ <span class="text-red-500">*</span>
                            </label>
                            <select id="keyArrangement" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                                <option value="Customer Keeps | å®¢æˆ·ä¿ç•™">Customer Keeps | å®¢æˆ·ä¿ç•™</option>
                                <option value="Handover to Inspector | äº¤ç»™æ£€æŸ¥å‘˜">Handover to Inspector | äº¤ç»™æ£€æŸ¥å‘˜</option>
                                <option value="Other | å…¶ä»–">Other | å…¶ä»–</option>
                            </select>
                        </div>

                        <!-- é’¥åŒ™å®‰æ’å…¶ä»–é€‰é¡¹çš„è¯´æ˜ -->
                        <div id="keyOtherSection" style="display: none;" class="lg:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Key Arrangement Details | é’¥åŒ™å®‰æ’è¯´æ˜ <span class="text-red-500">*</span>
                            </label>
                            <input type="text" id="keyOtherDetails" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Please specify the key arrangement details | è¯·è¯¦ç»†è¯´æ˜é’¥åŒ™çš„å…·ä½“å®‰æ’">
                        </div>
                    </div>

                    <div class="mt-8 text-center">
                        <button id="nextStepBtn" class="btn-primary text-white px-6 sm:px-8 py-3 sm:py-4 rounded-lg font-semibold text-lg">
                            Next: Select Time | ä¸‹ä¸€æ­¥ï¼šé€‰æ‹©æ—¶é—´ â†’
                        </button>
                    </div>
                </div>
            </div>

            <!-- æ­¥éª¤2ï¼šé€‰æ‹©æ—¶é—´ -->
            <div id="step2" style="display: none;">
                <div class="glass-effect rounded-2xl p-6 sm:p-8 shadow-xl card-hover fade-in">
                    <h3 class="text-xl sm:text-2xl font-bold mb-6 gradient-text">ğŸ“… Select Appointment Time | é€‰æ‹©é¢„çº¦æ—¶é—´</h3>
                    
                    <div class="mb-8">
                        <label class="block text-sm font-medium text-gray-700 mb-4">
                            Select Date | é€‰æ‹©æ—¥æœŸ <span class="text-red-500">*</span>
                        </label>
                        <div id="dateGrid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3">
                            <!-- æ—¥æœŸé€‰é¡¹ -->
                        </div>
                    </div>

                    <div id="timeSlotSection" style="display: none;" class="mb-8">
                        <label class="block text-sm font-medium text-gray-700 mb-4">
                            Select Time Slot | é€‰æ‹©æ—¶é—´æ®µ <span class="text-red-500">*</span>
                        </label>
                        <div id="timeSlotGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                            <!-- æ—¶é—´æ®µé€‰é¡¹ -->
                        </div>
                        
                        <div class="mt-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                å…¶ä»–æ—¶é—´éœ€æ±‚ï¼ˆéæ ‡å‡†æ—¶æ®µï¼‰
                            </label>
                            <textarea id="specialRequirements" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" rows="3" placeholder="å¦‚éœ€å…¶ä»–æ—¶é—´å®‰æ’ï¼Œè¯·åœ¨æ­¤è¯´æ˜ï¼ˆä¸ä¿è¯èƒ½æ»¡è¶³ï¼‰"></textarea>
                        </div>
                    </div>

                    <div class="mb-8">
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            å¤‡æ³¨
                        </label>
                        <textarea id="notes" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" rows="3" placeholder="å¦‚æœ‰å…¶ä»–éœ€è¦è¯´æ˜çš„äº‹é¡¹ï¼Œè¯·åœ¨æ­¤å¡«å†™"></textarea>
                    </div>

                    <div class="flex flex-col sm:flex-row justify-between gap-4">
                        <button id="prevStepBtn" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all">
                            â† ä¸Šä¸€æ­¥
                        </button>
                        <button id="submitBtn" class="btn-primary text-white px-6 sm:px-8 py-3 rounded-lg font-semibold opacity-50 cursor-not-allowed" disabled>
                            æäº¤é¢„çº¦
                        </button>
                    </div>
                </div>
            </div>

            <!-- æ­¥éª¤3ï¼šç¡®è®¤é¡µé¢ -->
            <div id="step3" style="display: none;">
                <div class="glass-effect rounded-2xl p-6 sm:p-8 shadow-xl text-center card-hover fade-in">
                    <div class="text-4xl sm:text-6xl mb-6">âœ…</div>
                    <h2 class="text-2xl sm:text-3xl font-bold text-green-600 mb-4">Booking Submitted Successfully! | é¢„çº¦æäº¤æˆåŠŸï¼</h2>
                    
                    <div class="bg-green-50 border-2 border-green-200 rounded-lg p-6 mb-6">
                        <p class="text-lg text-green-800 mb-2">Your order number is | æ‚¨çš„è®¢å•å·æ˜¯ï¼š</p>
                        <p id="orderNumber" class="text-2xl sm:text-3xl font-bold text-green-900"></p>
                        <p class="text-sm text-green-600 mt-2">Please save this order number for future reference | è¯·ä¿å­˜æ­¤è®¢å•å·ï¼Œä»¥ä¾¿åç»­æŸ¥è¯¢</p>
                    </div>

                    <div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-6 mb-6 text-left">
                        <h3 class="font-bold text-blue-900 mb-3">Booking Details | é¢„çº¦è¯¦æƒ…ï¼š</h3>
                        <div id="bookingDetails" class="space-y-2 text-blue-800">
                            <!-- é¢„çº¦è¯¦æƒ… -->
                        </div>
                    </div>

                    <div class="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-6 mb-6 text-left">
                        <h3 class="font-bold text-yellow-900 mb-3">ğŸ“‹ æ³¨æ„äº‹é¡¹ï¼š</h3>
                        <div id="noticeText" class="text-yellow-800 whitespace-pre-line">
                            è¯·æ³¨æ„ï¼š
â€¢ è¯·ç¡®ä¿é¢„çº¦æ—¶é—´å‡†ç¡®æ— è¯¯
â€¢ å¦‚éœ€å–æ¶ˆæˆ–ä¿®æ”¹ï¼Œè¯·æå‰24å°æ—¶è”ç³»
â€¢ æ£€æŸ¥å½“å¤©è¯·å‡†å¤‡å¥½ç›¸å…³æ–‡ä»¶
â€¢ å¦‚æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œè¯·åœ¨å¤‡æ³¨ä¸­è¯´æ˜
                        </div>
                    </div>

                    <div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-6 mb-6 text-left">
                        <h3 class="font-bold text-blue-900 mb-3">ğŸ“¢ é‡è¦æç¤ºï¼š</h3>
                        <div id="afterSubmitNotice" class="text-blue-800 whitespace-pre-line">
                            æˆ‘ä»¬ä¼šåœ¨24å°æ—¶å†…ä¸æ‚¨ç¡®è®¤é¢„çº¦è¯¦æƒ…ã€‚
å¦‚æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬ã€‚
è°¢è°¢æ‚¨çš„ä¿¡ä»»ï¼
                        </div>
                    </div>

                    <div class="text-center">
                        <button id="resetBtn" class="btn-secondary text-white px-6 sm:px-8 py-3 rounded-lg font-semibold">
                            Book Other Services | é¢„çº¦å…¶ä»–æœåŠ¡
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç®¡ç†å‘˜è§†å›¾ -->
        <div id="adminView" style="display: none;">
            <!-- æ—¥å†è§†å›¾ -->
            <div class="glass-effect rounded-2xl p-6 shadow-xl card-hover mb-6">
                <div class="flex flex-col sm:flex-row justify-between items-center mb-4">
                    <h3 class="text-xl font-bold gradient-text">ğŸ“… é¢„çº¦æ—¥å†</h3>
                    <div class="flex items-center space-x-2 mt-4 sm:mt-0">
                        <button id="prevMonth" class="btn-primary text-white px-3 py-2 rounded-lg text-sm">â€¹</button>
                        <span id="currentMonthYear" class="text-lg font-semibold mx-4 text-gray-700"></span>
                        <button id="nextMonth" class="btn-primary text-white px-3 py-2 rounded-lg text-sm">â€º</button>
                    </div>
                </div>
                <div id="calendarGrid" class="grid grid-cols-7 gap-2">
                    <!-- æ—¥å†ç½‘æ ¼ -->
                </div>
            </div>

            <!-- åå°ç®¡ç†æ ‡ç­¾é¡µ -->
            <div class="flex space-x-1 bg-gray-100 p-1 rounded-lg mb-6">
                <button id="ordersTabBtn" class="flex-1 py-3 px-4 rounded-md font-medium transition-all nav-active">
                    ğŸ“‹ è®¢å•ç®¡ç†
                </button>
                <button id="settingsTabBtn" class="flex-1 py-3 px-4 rounded-md font-medium transition-all nav-inactive">
                    âš™ï¸ ç³»ç»Ÿè®¾ç½®
                </button>
            </div>

            <!-- è®¢å•ç®¡ç† -->
            <div id="ordersTab" class="glass-effect rounded-2xl p-6 shadow-xl card-hover">
                <h3 class="text-xl font-bold gradient-text mb-6">è®¢å•ç®¡ç†</h3>
                <div id="ordersList">
                    <p class="text-center text-gray-500 py-8">æ­£åœ¨åŠ è½½è®¢å•æ•°æ®...</p>
                </div>
            </div>

            <!-- ç³»ç»Ÿè®¾ç½® -->
            <div id="settingsTab" style="display: none;" class="glass-effect rounded-2xl p-6 shadow-xl card-hover">
                <h3 class="text-xl font-bold gradient-text mb-6">ç³»ç»Ÿè®¾ç½®</h3>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            å®¢æˆ·ç«¯æ¬¢è¿ä¿¡æ¯
                        </label>
                        <textarea id="welcomeMessageInput" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" rows="3">æ¬¢è¿ä½¿ç”¨æˆ¿äº§æ£€æŸ¥é¢„çº¦ç³»ç»Ÿï¼æˆ‘ä»¬æä¾›ä¸“ä¸šã€è´´å¿ƒçš„æˆ¿äº§æ£€æŸ¥æœåŠ¡ã€‚</textarea>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            æäº¤åæ³¨æ„äº‹é¡¹
                        </label>
                        <textarea id="noticeMessageInput" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" rows="6">è¯·æ³¨æ„ï¼š
â€¢ è¯·ç¡®ä¿é¢„çº¦æ—¶é—´å‡†ç¡®æ— è¯¯
â€¢ å¦‚éœ€å–æ¶ˆæˆ–ä¿®æ”¹ï¼Œè¯·æå‰24å°æ—¶è”ç³»
â€¢ æ£€æŸ¥å½“å¤©è¯·å‡†å¤‡å¥½ç›¸å…³æ–‡ä»¶
â€¢ å¦‚æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œè¯·åœ¨å¤‡æ³¨ä¸­è¯´æ˜</textarea>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            æäº¤åé‡è¦æç¤º
                        </label>
                        <textarea id="afterSubmitNoticeInput" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" rows="4">æˆ‘ä»¬ä¼šåœ¨24å°æ—¶å†…ä¸æ‚¨ç¡®è®¤é¢„çº¦è¯¦æƒ…ã€‚
å¦‚æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬ã€‚
è°¢è°¢æ‚¨çš„ä¿¡ä»»ï¼</textarea>
                    </div>

                    <button id="saveSettingsBtn" class="btn-primary text-white px-6 py-3 rounded-lg font-semibold">
                        ä¿å­˜è®¾ç½®
                    </button>

                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <h4 class="font-medium text-blue-900 mb-2">ğŸ“Š æ•°æ®ç»Ÿè®¡</h4>
                        <div id="statsGrid" class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                            <!-- ç»Ÿè®¡æ•°æ® -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // åº”ç”¨æ•°æ®
        const appData = {
            bookings: [
                {
                    id: 1,
                    orderNumber: 'INV-InventoryHub-001',
                    customerName: 'å¼ ä¸‰',
                    phone: '13800138000',
                    email: 'zhang@example.com',
                    address: 'æ›¼åŸå¸‚ä¸­å¿ƒå…¬å¯“ 123å·',
                    postcode: 'M1 1AA',
                    serviceType: 'Final Inspection | æœŸæœ«æ£€æŸ¥',
                    preferredDate: '2025-06-15',
                    preferredTimeSlot: '10:00-11:30',
                    keyArrangement: 'Handover to Inspector | äº¤ç»™æ£€æŸ¥å‘˜',
                    specialRequirements: '',
                    notes: 'éœ€è¦æ£€æŸ¥å¨æˆ¿æ°´ç®¡',
                    status: 'confirmed',
                    createdAt: '2025-06-07T10:30:00Z'
                }
            ],
            settings: {
                welcomeMessage: 'æ¬¢è¿ä½¿ç”¨æˆ¿äº§æ£€æŸ¥é¢„çº¦ç³»ç»Ÿï¼æˆ‘ä»¬æä¾›ä¸“ä¸šã€è´´å¿ƒçš„æˆ¿äº§æ£€æŸ¥æœåŠ¡ã€‚',
                noticeMessage: 'è¯·æ³¨æ„ï¼š\nâ€¢ è¯·ç¡®ä¿é¢„çº¦æ—¶é—´å‡†ç¡®æ— è¯¯\nâ€¢ å¦‚éœ€å–æ¶ˆæˆ–ä¿®æ”¹ï¼Œè¯·æå‰24å°æ—¶è”ç³»\nâ€¢ æ£€æŸ¥å½“å¤©è¯·å‡†å¤‡å¥½ç›¸å…³æ–‡ä»¶\nâ€¢ å¦‚æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œè¯·åœ¨å¤‡æ³¨ä¸­è¯´æ˜',
                afterSubmitNotice: 'æˆ‘ä»¬ä¼šåœ¨24å°æ—¶å†…ä¸æ‚¨ç¡®è®¤é¢„çº¦è¯¦æƒ…ã€‚\nå¦‚æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬ã€‚\nè°¢è°¢æ‚¨çš„ä¿¡ä»»ï¼'
            },
            nextOrderNumber: 2,
            selectedDate: '',
            selectedTimeSlot: '',
            currentCalendarDate: new Date(),
            selectedCalendarDate: null, // ç”¨äºæ—¥å†ç‚¹å‡»ç­›é€‰
            showAllOrders: true // æ§åˆ¶æ˜¾ç¤ºæ‰€æœ‰è®¢å•è¿˜æ˜¯ç‰¹å®šæ—¥æœŸè®¢å•
        };

        // è·å–å…ƒç´ 
        const customerTab = document.getElementById('customerTab');
        const adminTab = document.getElementById('adminTab');
        const customerView = document.getElementById('customerView');
        const adminView = document.getElementById('adminView');

        // è§†å›¾åˆ‡æ¢
        function showCustomerView() {
            customerView.style.display = 'block';
            adminView.style.display = 'none';
            customerTab.className = 'nav-active px-4 py-2 rounded-lg font-semibold transition-all';
            adminTab.className = 'nav-inactive px-4 py-2 rounded-lg font-semibold transition-all';
        }

        function showAdminView() {
            const password = prompt('è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç :');
            if (password === 'admin123') {
                customerView.style.display = 'none';
                adminView.style.display = 'block';
                adminTab.className = 'nav-active px-4 py-2 rounded-lg font-semibold transition-all';
                customerTab.className = 'nav-inactive px-4 py-2 rounded-lg font-semibold transition-all';
                
                // åˆå§‹åŒ–åå°ç®¡ç†
                generateCalendar();
                showOrdersTab();
            } else if (password !== null) {
                alert('å¯†ç é”™è¯¯ï¼');
            }
        }

        // æ­¥éª¤æ§åˆ¶
        function showStep(stepNumber) {
            document.getElementById('step1').style.display = stepNumber === 1 ? 'block' : 'none';
            document.getElementById('step2').style.display = stepNumber === 2 ? 'block' : 'none';
            document.getElementById('step3').style.display = stepNumber === 3 ? 'block' : 'none';
        }

        // éªŒè¯ç¬¬ä¸€æ­¥
        function validateStep1() {
            const required = ['customerName', 'phone', 'email', 'address', 'serviceType', 'keyArrangement'];
            for (const field of required) {
                if (!document.getElementById(field).value.trim()) {
                    alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µï¼');
                    return false;
                }
            }
            
            // å¦‚æœé€‰æ‹©äº†"å…¶ä»–"é’¥åŒ™å®‰æ’ï¼Œéœ€è¦å¡«å†™è¯¦ç»†è¯´æ˜
            if (document.getElementById('keyArrangement').value === 'Other | å…¶ä»–') {
                if (!document.getElementById('keyOtherDetails').value.trim()) {
                    alert('Please specify the key arrangement details! | è¯·è¯¦ç»†è¯´æ˜é’¥åŒ™çš„å…·ä½“å®‰æ’ï¼');
                    return false;
                }
            }
            
            return true;
        }

        // ç”Ÿæˆå¯ç”¨æ—¥æœŸ
        function generateAvailableDates() {
            const dates = [];
            const today = new Date();
            
            for (let i = 1; i <= 30; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                
                if (date.getDay() >= 1 && date.getDay() <= 5) {
                    dates.push(date.toISOString().split('T')[0]);
                }
            }
            return dates;
        }

        // æ£€æŸ¥æ—¶é—´æ®µæ˜¯å¦è¢«é¢„çº¦
        function isTimeSlotBooked(date, timeSlot) {
            return appData.bookings.some(booking => 
                booking.preferredDate === date && 
                booking.preferredTimeSlot === timeSlot &&
                booking.status === 'confirmed'
            );
        }

        // ç”Ÿæˆæ—¥æœŸç½‘æ ¼
        function generateDateGrid() {
            const dates = generateAvailableDates();
            const dateGrid = document.getElementById('dateGrid');
            dateGrid.innerHTML = '';

            dates.slice(0, 12).forEach(date => {
                // æ£€æŸ¥è¿™ä¸ªæ—¥æœŸæ˜¯å¦è¿˜æœ‰å¯ç”¨æ—¶é—´æ®µ
                const timeSlots = ['10:00-11:30', '11:30-13:00', '13:00-14:30'];
                const hasAvailableSlots = timeSlots.some(slot => !isTimeSlotBooked(date, slot));
                
                if (hasAvailableSlots) {
                    const dateObj = new Date(date);
                    const button = document.createElement('button');
                    button.type = 'button';
                    button.className = 'p-3 rounded-lg border-2 transition-all hover:scale-105 border-gray-200 hover:border-blue-300 hover:bg-blue-50 bg-white';
                    
                    button.addEventListener('click', function() {
                        selectDate(date, this);
                    });
                    
                    button.innerHTML = `
                        <div class="text-sm font-medium">
                            ${dateObj.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' })}
                        </div>
                        <div class="text-xs text-gray-500">
                            ${dateObj.toLocaleDateString('zh-CN', { weekday: 'short' })}
                        </div>
                    `;
                    dateGrid.appendChild(button);
                }
            });
        }

        // é€‰æ‹©æ—¥æœŸ
        function selectDate(date, button) {
            // é‡ç½®æ‰€æœ‰æ—¥æœŸæŒ‰é’®æ ·å¼
            document.querySelectorAll('#dateGrid button').forEach(btn => {
                btn.className = 'p-3 rounded-lg border-2 transition-all hover:scale-105 border-gray-200 hover:border-blue-300 hover:bg-blue-50 bg-white';
            });

            // è®¾ç½®é€‰ä¸­çŠ¶æ€
            button.className = 'p-3 rounded-lg border-2 transition-all hover:scale-105 border-orange-500 bg-orange-50 text-orange-700';
            appData.selectedDate = date;
            appData.selectedTimeSlot = '';
            
            generateTimeSlotGrid();
            document.getElementById('timeSlotSection').style.display = 'block';
            updateSubmitButton();
        }

        // ç”Ÿæˆæ—¶é—´æ®µç½‘æ ¼
        function generateTimeSlotGrid() {
            const timeSlots = ['10:00-11:30', '11:30-13:00', '13:00-14:30'];
            const timeSlotGrid = document.getElementById('timeSlotGrid');
            timeSlotGrid.innerHTML = '';

            timeSlots.forEach(timeSlot => {
                const isBooked = isTimeSlotBooked(appData.selectedDate, timeSlot);
                const button = document.createElement('button');
                button.type = 'button';
                
                if (isBooked) {
                    button.className = 'time-slot-booked p-4 rounded-lg font-medium transition-all';
                    button.disabled = true;
                    button.innerHTML = `
                        <div class="text-lg">${timeSlot}</div>
                        <div class="text-sm mt-1">å·²é¢„çº¦</div>
                    `;
                } else {
                    button.className = 'time-slot-available p-4 rounded-lg font-medium transition-all';
                    button.addEventListener('click', function() {
                        selectTimeSlot(timeSlot, this);
                    });
                    button.innerHTML = `
                        <div class="text-lg">${timeSlot}</div>
                        <div class="text-sm mt-1">å¯é¢„çº¦</div>
                    `;
                }
                
                timeSlotGrid.appendChild(button);
            });
        }

        // é€‰æ‹©æ—¶é—´æ®µ
        function selectTimeSlot(timeSlot, button) {
            document.querySelectorAll('#timeSlotGrid button:not(:disabled)').forEach(btn => {
                btn.className = 'time-slot-available p-4 rounded-lg font-medium transition-all';
                btn.innerHTML = btn.innerHTML.replace('å·²é€‰æ‹©', 'å¯é¢„çº¦');
            });

            button.className = 'time-slot-selected p-4 rounded-lg font-medium transition-all';
            button.innerHTML = `
                <div class="text-lg">${timeSlot}</div>
                <div class="text-sm mt-1">å·²é€‰æ‹©</div>
            `;
            
            appData.selectedTimeSlot = timeSlot;
            updateSubmitButton();
        }

        // æ›´æ–°æäº¤æŒ‰é’®
        function updateSubmitButton() {
            const submitBtn = document.getElementById('submitBtn');
            if (appData.selectedDate && appData.selectedTimeSlot) {
                submitBtn.disabled = false;
                submitBtn.className = 'btn-primary text-white px-6 sm:px-8 py-3 rounded-lg font-semibold';
            } else {
                submitBtn.disabled = true;
                submitBtn.className = 'btn-primary text-white px-6 sm:px-8 py-3 rounded-lg font-semibold opacity-50 cursor-not-allowed';
            }
        }

        // æäº¤é¢„çº¦
        function submitBooking() {
            const orderNum = appData.nextOrderNumber.toString().padStart(3, '0');
            const newOrderNumber = `INV-InventoryHub-${orderNum}`;
            appData.nextOrderNumber++;

            let keyArrangement = document.getElementById('keyArrangement').value;
            if (keyArrangement === 'Other | å…¶ä»–') {
                keyArrangement = 'Other | å…¶ä»–ï¼š' + document.getElementById('keyOtherDetails').value;
            }

            const newBooking = {
                id: Date.now(),
                orderNumber: newOrderNumber,
                customerName: document.getElementById('customerName').value,
                phone: document.getElementById('phone').value,
                email: document.getElementById('email').value,
                address: document.getElementById('address').value,
                postcode: document.getElementById('postcode').value,
                serviceType: document.getElementById('serviceType').value,
                preferredDate: appData.selectedDate,
                preferredTimeSlot: appData.selectedTimeSlot,
                keyArrangement: keyArrangement,
                specialRequirements: document.getElementById('specialRequirements').value,
                notes: document.getElementById('notes').value,
                status: 'pending',
                createdAt: new Date().toISOString()
            };

            appData.bookings.push(newBooking);
            
            document.getElementById('orderNumber').textContent = newOrderNumber;
            document.getElementById('bookingDetails').innerHTML = `
                <p><strong>å§“åï¼š</strong>${newBooking.customerName}</p>
                <p><strong>è”ç³»æ–¹å¼ï¼š</strong>${newBooking.phone}</p>
                <p><strong>æœåŠ¡ç±»å‹ï¼š</strong>${newBooking.serviceType}</p>
                <p><strong>é¢„çº¦æ—¥æœŸï¼š</strong>${newBooking.preferredDate}</p>
                <p><strong>é¢„çº¦æ—¶é—´ï¼š</strong>${newBooking.preferredTimeSlot}</p>
                <p><strong>é’¥åŒ™å®‰æ’ï¼š</strong>${newBooking.keyArrangement}</p>
            `;
            
            showStep(3);
        }

        // é‡ç½®è¡¨å•
        function resetForm() {
            const fields = ['customerName', 'phone', 'email', 'address', 'postcode', 'specialRequirements', 'notes', 'keyOtherDetails'];
            fields.forEach(field => {
                if (document.getElementById(field)) {
                    document.getElementById(field).value = '';
                }
            });
            
            // é‡ç½®ä¸‹æ‹‰æ¡†ä¸ºç¬¬ä¸€ä¸ªé€‰é¡¹
            document.getElementById('serviceType').selectedIndex = 0;
            document.getElementById('keyArrangement').selectedIndex = 0;
            
            // éšè—é’¥åŒ™å…¶ä»–é€‰é¡¹åŒºåŸŸ
            document.getElementById('keyOtherSection').style.display = 'none';
            
            appData.selectedDate = '';
            appData.selectedTimeSlot = '';
            document.getElementById('timeSlotSection').style.display = 'none';
            
            showStep(1);
        }

        // ç”Ÿæˆæ—¥å†
        function generateCalendar() {
            const year = appData.currentCalendarDate.getFullYear();
            const month = appData.currentCalendarDate.getMonth();
            
            // æ›´æ–°æœˆä»½å¹´ä»½æ˜¾ç¤º
            document.getElementById('currentMonthYear').textContent = 
                `${year}å¹´${month + 1}æœˆ`;
            
            const firstDay = new Date(year, month, 1);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());
            
            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';
            
            // æ·»åŠ æ˜ŸæœŸæ ‡é¢˜
            const weekDays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
            weekDays.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'text-center font-semibold text-gray-600 p-2';
                dayHeader.textContent = day;
                calendarGrid.appendChild(dayHeader);
            });
            
            // ç”Ÿæˆæ—¥å†æ ¼å­
            for (let i = 0; i < 42; i++) {
                const currentDate = new Date(startDate);
                currentDate.setDate(startDate.getDate() + i);
                
                const dayElement = document.createElement('div');
                const dateString = currentDate.toISOString().split('T')[0];
                
                dayElement.className = 'relative p-2 text-center border border-gray-100 rounded min-h-[60px] flex flex-col justify-center cursor-pointer transition-all hover:bg-gray-50';
                dayElement.setAttribute('data-date', dateString);
                
                const isCurrentMonth = currentDate.getMonth() === month;
                const hasBookings = appData.bookings.some(booking => 
                    booking.preferredDate === dateString && booking.status === 'confirmed'
                );
                
                // æ£€æŸ¥æ˜¯å¦æ˜¯é€‰ä¸­çš„æ—¥æœŸ
                const isSelected = appData.selectedCalendarDate === dateString;
                
                if (isCurrentMonth) {
                    if (isSelected) {
                        dayElement.className += ' calendar-day-selected bg-orange-200 border-orange-400 text-gray-900';
                    } else {
                        dayElement.className += ' bg-white text-gray-900';
                        if (hasBookings) {
                            dayElement.className += ' bg-blue-100 border-blue-300';
                        }
                    }
                } else {
                    dayElement.className += ' bg-gray-50 text-gray-400';
                }
                
                // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                if (isCurrentMonth) {
                    dayElement.addEventListener('click', () => handleCalendarDayClick(dateString));
                }
                
                dayElement.innerHTML = `
                    <div class="text-sm font-medium">${currentDate.getDate()}</div>
                    ${hasBookings ? '<div class="w-2 h-2 bg-blue-500 rounded-full mx-auto mt-1"></div>' : ''}
                `;
                
                calendarGrid.appendChild(dayElement);
            }
        }

        // ç®¡ç†å‘˜æ ‡ç­¾é¡µåˆ‡æ¢
        function showOrdersTab() {
            document.getElementById('ordersTab').style.display = 'block';
            document.getElementById('settingsTab').style.display = 'none';
            document.getElementById('ordersTabBtn').className = 'flex-1 py-3 px-4 rounded-md font-medium transition-all nav-active';
            document.getElementById('settingsTabBtn').className = 'flex-1 py-3 px-4 rounded-md font-medium transition-all nav-inactive';
            loadOrdersList();
        }

        function showSettingsTab() {
            document.getElementById('ordersTab').style.display = 'none';
            document.getElementById('settingsTab').style.display = 'block';
            document.getElementById('ordersTabBtn').className = 'flex-1 py-3 px-4 rounded-md font-medium transition-all nav-inactive';
            document.getElementById('settingsTabBtn').className = 'flex-1 py-3 px-4 rounded-md font-medium transition-all nav-active';
            
            // åŠ è½½å½“å‰è®¾ç½®
            document.getElementById('welcomeMessageInput').value = appData.settings.welcomeMessage;
            document.getElementById('noticeMessageInput').value = appData.settings.noticeMessage;
            document.getElementById('afterSubmitNoticeInput').value = appData.settings.afterSubmitNotice;
            updateStats();
        }

        // åŠ è½½è®¢å•åˆ—è¡¨
        function loadOrdersList() {
            const ordersList = document.getElementById('ordersList');
            
            if (appData.bookings.length === 0) {
                ordersList.innerHTML = `
                    <div class="text-center py-12">
                        <div class="text-4xl mb-4">ğŸ“‹</div>
                        <p class="text-gray-500">æš‚æ— è®¢å•</p>
                    </div>
                `;
                return;
            }

            // ç­›é€‰è®¢å•ï¼šå¦‚æœé€‰æ‹©äº†ç‰¹å®šæ—¥æœŸï¼Œåªæ˜¾ç¤ºè¯¥æ—¥æœŸçš„è®¢å•
            let filteredBookings = appData.bookings;
            if (!appData.showAllOrders && appData.selectedCalendarDate) {
                filteredBookings = appData.bookings.filter(booking => 
                    booking.preferredDate === appData.selectedCalendarDate
                );
            }

            ordersList.innerHTML = filteredBookings.slice().reverse().map(booking => `
                <div class="admin-bg rounded-lg p-4 mb-4 card-hover border border-gray-200">
                    <div class="flex flex-col sm:flex-row justify-between items-start mb-3">
                        <div>
                            <h4 class="font-bold text-lg text-blue-900">${booking.orderNumber}</h4>
                            <p class="text-gray-600">${booking.customerName} â€¢ ${booking.phone}</p>
                        </div>
                        <span class="mt-2 sm:mt-0 px-3 py-1 rounded-full text-xs font-medium ${getStatusBadgeClass(booking.status)}">
                            ${getStatusLabel(booking.status)}
                        </span>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4">
                        <div>
                            <p class="text-gray-700"><strong>æœåŠ¡ç±»å‹ï¼š</strong>${booking.serviceType}</p>
                            <p class="text-gray-700"><strong>é¢„çº¦æ—¶é—´ï¼š</strong>${booking.preferredDate} ${booking.preferredTimeSlot}</p>
                            <p class="text-gray-700"><strong>é’¥åŒ™å®‰æ’ï¼š</strong>${booking.keyArrangement}</p>
                        </div>
                        <div>
                            <p class="text-gray-700"><strong>åœ°å€ï¼š</strong>${booking.address}</p>
                            <p class="text-gray-700"><strong>é‚®ç®±ï¼š</strong>${booking.email}</p>
                        </div>
                    </div>

                    ${booking.notes ? `
                        <div class="mb-4">
                            <p class="text-gray-700"><strong>Notes | å¤‡æ³¨ï¼š</strong></p>
                            <p class="text-gray-600 bg-gray-100 p-2 rounded">${booking.notes}</p>
                        </div>
                    ` : ''}

                    <div class="flex flex-col sm:flex-row gap-2">
                        ${booking.status === 'pending' ? `
                            <button data-booking-id="${booking.id}" class="confirm-btn btn-primary text-white px-4 py-2 rounded-lg text-sm">
                                Confirm | ç¡®è®¤é¢„çº¦
                            </button>
                        ` : ''}
                        
                        ${booking.status === 'confirmed' ? `
                            <button data-booking-id="${booking.id}" class="modify-btn btn-secondary text-white px-4 py-2 rounded-lg text-sm">
                                Modify Time | ä¿®æ”¹æ—¶é—´
                            </button>
                        ` : ''}
                        
                        <button data-booking-id="${booking.id}" class="cancel-btn bg-red-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-600 transition-all">
                            ${booking.status === 'confirmed' ? 'Cancel | å–æ¶ˆ' : 'Cancel | å–æ¶ˆé¢„çº¦'}
                        </button>
                        
                        <button data-booking-id="${booking.id}" class="delete-btn bg-gray-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-gray-600 transition-all">
                            Delete | åˆ é™¤
                        </button>
                    </div>
                </div>
            `).join('');
            
            // é‡æ–°ç»‘å®šæŒ‰é’®äº‹ä»¶
            document.querySelectorAll('.confirm-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const bookingId = parseInt(this.dataset.bookingId);
                    confirmBooking(bookingId);
                });
            });
            
            document.querySelectorAll('.cancel-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const bookingId = parseInt(this.dataset.bookingId);
                    cancelBooking(bookingId);
                });
            });

            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const bookingId = parseInt(this.dataset.bookingId);
                    deleteBooking(bookingId);
                });
            });

            document.querySelectorAll('.modify-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const bookingId = parseInt(this.dataset.bookingId);
                    modifyBookingTime(bookingId);
                });
            });
        }

        // è·å–çŠ¶æ€æ ·å¼ç±»
        function getStatusBadgeClass(status) {
            const classes = {
                pending: 'bg-yellow-100 text-yellow-800',
                confirmed: 'bg-green-100 text-green-800',
                completed: 'bg-blue-100 text-blue-800',
                cancelled: 'bg-gray-100 text-gray-800'
            };
            return classes[status] || classes.pending;
        }

        // è·å–çŠ¶æ€æ ‡ç­¾
        function getStatusLabel(status) {
            const labels = {
                pending: 'å¾…ç¡®è®¤',
                confirmed: 'å·²ç¡®è®¤',
                completed: 'å·²å®Œæˆ',
                cancelled: 'å·²å–æ¶ˆ'
            };
            return labels[status] || 'å¾…ç¡®è®¤';
        }

        // ç¡®è®¤é¢„çº¦
        function confirmBooking(bookingId) {
            const booking = appData.bookings.find(b => b.id === bookingId);
            if (booking) {
                booking.status = 'confirmed';
                loadOrdersList();
                generateCalendar(); // æ›´æ–°æ—¥å†æ˜¾ç¤º
                
                // å‘é€ç¡®è®¤é‚®ä»¶
                sendConfirmationEmail(booking, false);
            }
        }

        // å–æ¶ˆé¢„çº¦
        function cancelBooking(bookingId) {
            if (confirm('Are you sure you want to cancel this booking? | ç¡®å®šè¦å–æ¶ˆè¿™ä¸ªé¢„çº¦å—ï¼Ÿ')) {
                const booking = appData.bookings.find(b => b.id === bookingId);
                if (booking) {
                    booking.status = 'cancelled';
                    loadOrdersList();
                    generateCalendar(); // æ›´æ–°æ—¥å†æ˜¾ç¤º
                    
                    // å‘é€å–æ¶ˆé€šçŸ¥é‚®ä»¶
                    const emailContent = `
Dear ${booking.customerName} | äº²çˆ±çš„ ${booking.customerName}ï¼Œ

Your booking has been cancelled. | æ‚¨çš„é¢„çº¦å·²è¢«å–æ¶ˆã€‚

Booking Details | é¢„çº¦è¯¦æƒ…ï¼š
- Order Number | è®¢å•å·: ${booking.orderNumber}
- Service Type | æœåŠ¡ç±»å‹: ${booking.serviceType}
- Original Date & Time | åŸå®šæ—¥æœŸæ—¶é—´: ${booking.preferredDate} ${booking.preferredTimeSlot}

If you have any questions, please contact us. | å¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³»æˆ‘ä»¬ã€‚

Best regards | æ­¤è‡´æ•¬ç¤¼
Property Inspection Team | æˆ¿äº§æ£€æŸ¥å›¢é˜Ÿ
                    `;
                    
                    console.log('Cancellation Email:', emailContent);
                    alert(`Cancellation email sent to ${booking.email} | å–æ¶ˆé€šçŸ¥é‚®ä»¶å·²å‘é€è‡³ ${booking.email}`);
                }
            }
        }

        // æ›´æ–°è®¾ç½®
        function updateSettings() {
            appData.settings.welcomeMessage = document.getElementById('welcomeMessageInput').value;
            appData.settings.noticeMessage = document.getElementById('noticeMessageInput').value;
            appData.settings.afterSubmitNotice = document.getElementById('afterSubmitNoticeInput').value;
            
            // æ›´æ–°å®¢æˆ·ç«¯æ˜¾ç¤º
            document.getElementById('welcomeText').textContent = appData.settings.welcomeMessage;
            document.getElementById('noticeText').textContent = appData.settings.noticeMessage;
            document.getElementById('afterSubmitNotice').textContent = appData.settings.afterSubmitNotice;
            
            alert('è®¾ç½®å·²ä¿å­˜ï¼');
        }

        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        function updateStats() {
            const statsGrid = document.getElementById('statsGrid');
            const totalBookings = appData.bookings.length;
            const pendingBookings = appData.bookings.filter(b => b.status === 'pending').length;
            const confirmedBookings = appData.bookings.filter(b => b.status === 'confirmed').length;
            const completedBookings = appData.bookings.filter(b => b.status === 'completed').length;

            statsGrid.innerHTML = `
                <div class="bg-white p-3 rounded-lg border border-gray-200">
                    <div class="text-2xl font-bold text-blue-900">${totalBookings}</div>
                    <div class="text-sm text-blue-700">æ€»è®¢å•</div>
                </div>
                <div class="bg-white p-3 rounded-lg border border-gray-200">
                    <div class="text-2xl font-bold text-yellow-600">${pendingBookings}</div>
                    <div class="text-sm text-yellow-700">å¾…ç¡®è®¤</div>
                </div>
                <div class="bg-white p-3 rounded-lg border border-gray-200">
                    <div class="text-2xl font-bold text-green-600">${confirmedBookings}</div>
                    <div class="text-sm text-green-700">å·²ç¡®è®¤</div>
                </div>
                <div class="bg-white p-3 rounded-lg border border-gray-200">
                    <div class="text-2xl font-bold text-blue-600">${completedBookings}</div>
                    <div class="text-sm text-blue-700">å·²å®Œæˆ</div>
                </div>
            `;
        }

        // äº‹ä»¶ç»‘å®š
        function bindEvents() {
            // å¯¼èˆªæŒ‰é’®
            customerTab.addEventListener('click', showCustomerView);
            adminTab.addEventListener('click', showAdminView);

            // æ­¥éª¤æ§åˆ¶æŒ‰é’®
            document.getElementById('nextStepBtn').addEventListener('click', function() {
                if (validateStep1()) {
                    showStep(2);
                    generateDateGrid();
                }
            });

            document.getElementById('prevStepBtn').addEventListener('click', function() {
                showStep(1);
            });

            document.getElementById('submitBtn').addEventListener('click', submitBooking);
            document.getElementById('resetBtn').addEventListener('click', resetForm);

            // é’¥åŒ™å®‰æ’å˜åŒ–ç›‘å¬
            document.getElementById('keyArrangement').addEventListener('change', function() {
                const keyOtherSection = document.getElementById('keyOtherSection');
                if (this.value === 'Other | å…¶ä»–') {
                    keyOtherSection.style.display = 'block';
                } else {
                    keyOtherSection.style.display = 'none';
                    document.getElementById('keyOtherDetails').value = '';
                }
            });

            // æ—¥å†å¯¼èˆªæŒ‰é’®
            document.getElementById('prevMonth').addEventListener('click', function() {
                appData.currentCalendarDate.setMonth(appData.currentCalendarDate.getMonth() - 1);
                generateCalendar();
            });

            document.getElementById('nextMonth').addEventListener('click', function() {
                appData.currentCalendarDate.setMonth(appData.currentCalendarDate.getMonth() + 1);
                generateCalendar();
            });

            // åå°ç®¡ç†æ ‡ç­¾åˆ‡æ¢
            document.getElementById('ordersTabBtn').addEventListener('click', showOrdersTab);
            document.getElementById('settingsTabBtn').addEventListener('click', showSettingsTab);

            // ä¿å­˜è®¾ç½®æŒ‰é’®
            document.getElementById('saveSettingsBtn').addEventListener('click', updateSettings);
        }

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            bindEvents();
            showCustomerView();
            
            // è®¾ç½®é»˜è®¤é€‰é¡¹
            document.getElementById('serviceType').selectedIndex = 0;
            document.getElementById('keyArrangement').selectedIndex = 0;
        });
    </script>
</body>
</html>